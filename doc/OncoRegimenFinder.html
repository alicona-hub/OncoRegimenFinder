<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Meera Y. Patel, MD" />


<title>Introduction to OncoRegimenFinder</title>

<script>// Hide empty <a> tag within highlighted CodeBlock for screen reader accessibility (see https://github.com/jgm/pandoc/issues/6352#issuecomment-626106786) -->
// v0.0.1
// Written by JooYoung Seo (jooyoung@psu.edu) and Atsushi Yasumoto on June 1st, 2020.

document.addEventListener('DOMContentLoaded', function() {
  const codeList = document.getElementsByClassName("sourceCode");
  for (var i = 0; i < codeList.length; i++) {
    var linkList = codeList[i].getElementsByTagName('a');
    for (var j = 0; j < linkList.length; j++) {
      if (linkList[j].innerHTML === "") {
        linkList[j].setAttribute('aria-hidden', 'true');
      }
    }
  }
});
</script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Introduction to OncoRegimenFinder</h1>
<h4 class="author">Meera Y. Patel, MD</h4>


<div id="TOC">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#general-procedure-notes">General Procedure Notes</a></li>
<li><a href="#setup">Setup</a><ul>
<li><a href="#setup-requirements">Setup Requirements</a></li>
<li><a href="#outputs">Outputs</a></li>
<li><a href="#maintenance">Maintenance</a></li>
<li><a href="#procedure">Procedure</a><ul>
<li><a href="#load-packages">Load Packages</a></li>
<li><a href="#set-parameters">Set Parameters</a></li>
<li><a href="#vocabulary-table">Vocabulary Table</a></li>
<li><a href="#ingredient-exposure-table">Ingredient Exposure Table</a></li>
</ul></li>
</ul></li>
<li><a href="#run-algorithm">Run Algorithm</a><ul>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#outputs-1">Outputs</a><ul>
<li><a href="#intermediate">Intermediate</a></li>
<li><a href="#final">Final</a></li>
</ul></li>
<li><a href="#procedure-1">Procedure</a><ul>
<li><a href="#load-packages-1">Load Packages</a></li>
<li><a href="#set-parameters-1">Set Parameters</a></li>
<li><a href="#steps">Steps</a></li>
</ul></li>
</ul></li>
</ul>
</div>

<div id="overview" class="section level1">
<h1>Overview</h1>
<p>The goal of OncoRegimenFinder is to write tables that derive antineoplastic drug combinations from every patient in the OMOP CDM instance. The execution occurs in 2 overarching steps:<br />
1. Subsetting the Drug Exposure table for antineoplastic drugs<br />
2. Executing an algorithm that derives antineoplastic drug combinations based on overlaps in the window of time created by adding and subtracting the <code>date_lag_input</code> in days from the start date of the drug exposure. This initial resultset is then joined onto itself for a number of iterations determined by <code>regimen_repeats</code>, the maximum number of drugs in derived drug combinations.</p>
<p>It is important to note that the procedures shown below will run an algorithm with a set <code>date_lag_input</code> and <code>regimen_repeats</code> across the entire OMOP CDM Drug Exposure Table. Though the ultimate goal is to enable retrieval of derived drug combinations from the final <code>writeDatabaseSchema.regimenIngredientTable</code> via a join on the <code>person_id</code> field, specific cohorts may require different <code>date_lag_input</code> and <code>regimen_repeats</code>. For example, esophageal carcinoma patients tend to have regimens executed in blocks of 2 weeks instead of 30 days and the algorithm may return more accurate results with a <code>date_lag_input</code> of 15 days. In special cases such as this it, a second run of OncoRegimenFinder with modified parameters should be run with customized table names.</p>
</div>
<div id="general-procedure-notes" class="section level1">
<h1>General Procedure Notes</h1>
<ul>
<li>If any of the tables written in this package already exist in the given schema, the existing table is renamed with the system date appended in the format {table}_YYYY_mm_dd. If {table}_YYYY_mm_dd already exists, the process is skipped and the main table (ie {table}) is dropped.</li>
</ul>
</div>
<div id="setup" class="section level1">
<h1>Setup</h1>
<p>Setup involves writing an Ingredient Exposure Table and a Vocabulary Table that serve as the data sources for the remainder of the OncoRegimenFinder procedure.</p>
<div id="setup-requirements" class="section level2">
<h2>Setup Requirements</h2>
<ol style="list-style-type: decimal">
<li>A database connection object <code>conn</code> to your OMOP CDM instance<br />
</li>
<li><code>writeDatabaseSchema</code> destination schema with write privileges</li>
</ol>
</div>
<div id="outputs" class="section level2">
<h2>Outputs</h2>
<p>The objective of the setup is to map all data sources to RxNorm Ingredients, which will serve as the point of alignment between Drug Exposures and a Regimen. This involves creating the following tables in <code>writeDatabaseSchema</code>:<br />
1. Ingredient Exposure Table (<code>drugExposureIngredientTable</code>): Drug Exposure Table with an additional <code>ingredient_concept_id</code> field that references the RxNorm Ingredient that corresponds to the <code>drug_concept_id</code> in the OMOP Vocabulary.<br />
1. Vocabulary Table (<code>vocabularyTable</code>): In a similar fashion as the Ingredient Exposure Table, HemOnc Regimens are mapped to mapped to 1 or more RxNorm Ingredients.</p>
</div>
<div id="maintenance" class="section level2">
<h2>Maintenance</h2>
<ul>
<li>The Ingredient Exposure Table should be rewritten according to the cadence in which the Drug Exposures Table source is updated.<br />
</li>
<li>The Vocabulary Table should be rewritten whenever there is an update to HemOnc, RxNorm, or RxNorm Extension in the OMOP Vocabulary.</li>
</ul>
</div>
<div id="procedure" class="section level2">
<h2>Procedure</h2>
<div id="load-packages" class="section level3">
<h3>Load Packages</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">library</span>(OncoRegimenFinder)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">library</span>(tidyverse)</span></code></pre></div>
</div>
<div id="set-parameters" class="section level3">
<h3>Set Parameters</h3>
<ul>
<li><code>cdmDatabaseSchema</code>: schema housing the Concept and Drug Exposure Table<br />
</li>
<li><code>writeDatabaseSchema</code>: schema to write the Ingredient Exposure and Vocabulary Table to<br />
</li>
<li><code>drugExposureIngredientTable</code>: name of the Ingredient Exposure Table<br />
</li>
<li><code>vocabularyTable</code>: name of the Vocabulary Table</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># Schema for the Concept and Drug Exposure Tables</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>cdmDatabaseSchema &lt;-<span class="st"> &quot;omop_cdm_2&quot;</span></span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co"># Output Schema and Tables</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>writeDatabaseSchema &lt;-<span class="st"> &quot;patelm9&quot;</span></span>
<span id="cb2-6"><a href="#cb2-6"></a>drugExposureIngredientTable &lt;-<span class="st"> &quot;ingredient_exposure&quot;</span></span>
<span id="cb2-7"><a href="#cb2-7"></a>vocabularyTable &lt;-<span class="st"> &quot;oncoregimenfinder_vocabulary&quot;</span></span></code></pre></div>
</div>
<div id="vocabulary-table" class="section level3">
<h3>Vocabulary Table</h3>
<div id="write" class="section level4">
<h4>Write</h4>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>OncoRegimenFinder<span class="op">::</span><span class="kw">createVocabTable</span>(</span>
<span id="cb3-2"><a href="#cb3-2"></a>  <span class="dt">conn =</span> conn,</span>
<span id="cb3-3"><a href="#cb3-3"></a>  <span class="dt">writeDatabaseSchema =</span> writeDatabaseSchema,</span>
<span id="cb3-4"><a href="#cb3-4"></a>  <span class="dt">cdmDatabaseSchema =</span> cdmDatabaseSchema,</span>
<span id="cb3-5"><a href="#cb3-5"></a>  <span class="dt">vocabularyTable =</span> vocabularyTable</span>
<span id="cb3-6"><a href="#cb3-6"></a>)</span></code></pre></div>
</div>
<div id="row-count-history" class="section level4">
<h4>Row Count History</h4>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left">Table</th>
<th align="right">RowCount</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ONCOREGIMENFINDER_VOCABULARY</td>
<td align="right">1425</td>
</tr>
<tr class="even">
<td align="left">ONCOREGIMENFINDER_VOCABULARY_2020_07_28</td>
<td align="right">1388</td>
</tr>
<tr class="odd">
<td align="left">ONCOREGIMENFINDER_VOCABULARY_2020_08_06</td>
<td align="right">1388</td>
</tr>
<tr class="even">
<td align="left">ONCOREGIMENFINDER_VOCABULARY_2020_08_08</td>
<td align="right">1388</td>
</tr>
<tr class="odd">
<td align="left">ONCOREGIMENFINDER_VOCABULARY_2020_08_09</td>
<td align="right">1530</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="at-a-glance" class="section level4">
<h4>At a Glance</h4>
<div class="kable-table">
<table>
<colgroup>
<col width="6%"></col>
<col width="25%"></col>
<col width="68%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="right">regimen_id</th>
<th align="left">regimen_name</th>
<th align="left">ingredient_combination</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">35803678</td>
<td align="left">Pembrolizumab monotherapy</td>
<td align="left">pembrolizumab</td>
</tr>
<tr class="even">
<td align="right">35806905</td>
<td align="left">Interferon alfa-2a and Interleukin-2</td>
<td align="left">aldesleukin, interferon alfa-2a</td>
</tr>
<tr class="odd">
<td align="right">35804212</td>
<td align="left">FEC</td>
<td align="left">cyclophosphamide, epirubicin, fluorouracil</td>
</tr>
<tr class="even">
<td align="right">35805757</td>
<td align="left">Cladribine and Rituximab</td>
<td align="left">cladribine, rituximab</td>
</tr>
<tr class="odd">
<td align="right">35805094</td>
<td align="left">CHOP-B</td>
<td align="left">bleomycin, cyclophosphamide, doxorubicin, prednisone, vincristine</td>
</tr>
<tr class="even">
<td align="right">35806333</td>
<td align="left">V-HyperCAD</td>
<td align="left">bortezomib, cyclophosphamide, dexamethasone, doxorubicin</td>
</tr>
<tr class="odd">
<td align="right">35805886</td>
<td align="left">Mepolizumab monotherapy</td>
<td align="left">mepolizumab</td>
</tr>
<tr class="even">
<td align="right">35102032</td>
<td align="left">AspaMetDex (Erwinaze)</td>
<td align="left">asparaginase, dexamethasone, methotrexate</td>
</tr>
<tr class="odd">
<td align="right">35803526</td>
<td align="left">7 plus 5i</td>
<td align="left">cytarabine, idarubicin</td>
</tr>
<tr class="even">
<td align="right">35804787</td>
<td align="left">FOLFIRI and Ziv-aflibercept</td>
<td align="left">aflibercept, fluorouracil, irinotecan, leucovorin</td>
</tr>
<tr class="odd">
<td align="right">35804372</td>
<td align="left">BASIC</td>
<td align="left">cyclophosphamide, methotrexate, prednisone, rituximab, vincristine</td>
</tr>
<tr class="even">
<td align="right">35803538</td>
<td align="left">Amsacrine and Cytarabine</td>
<td align="left">amsacrine, cytarabine</td>
</tr>
<tr class="odd">
<td align="right">35804520</td>
<td align="left">Bortezomib monotherapy</td>
<td align="left">bortezomib</td>
</tr>
<tr class="even">
<td align="right">35806646</td>
<td align="left">Cyclophosphamide, Dacarbazine, Vincristine</td>
<td align="left">cyclophosphamide, dacarbazine, vincristine</td>
</tr>
<tr class="odd">
<td align="right">35806303</td>
<td align="left">CYKLONE</td>
<td align="left">carfilzomib, cyclophosphamide, dexamethasone, thalidomide</td>
</tr>
<tr class="even">
<td align="right">35804063</td>
<td align="left">Hyper-CVAD/MA and Everolimus</td>
<td align="left">cyclophosphamide, cytarabine, dexamethasone, doxorubicin, everolimus, methotrexate, methylprednisolone, vincristine</td>
</tr>
<tr class="odd">
<td align="right">35807021</td>
<td align="left">Carboplatin and Etoposide, then auto HSCT</td>
<td align="left">carboplatin, etoposide</td>
</tr>
<tr class="even">
<td align="right">35804590</td>
<td align="left">Idelalisib and Rituximab</td>
<td align="left">idelalisib, rituximab</td>
</tr>
<tr class="odd">
<td align="right">35806082</td>
<td align="left">VR-CAP</td>
<td align="left">bortezomib, cyclophosphamide, doxorubicin, prednisone, rituximab</td>
</tr>
<tr class="even">
<td align="right">35803589</td>
<td align="left">Mitotane and EDP</td>
<td align="left">cisplatin, doxorubicin, etoposide, mitotane</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="ingredient-exposure-table" class="section level3">
<h3>Ingredient Exposure Table</h3>
<div id="write-ingredient-exposure-table" class="section level4">
<h4>Write Ingredient Exposure Table</h4>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a></span>
<span id="cb4-2"><a href="#cb4-2"></a>OncoRegimenFinder<span class="op">::</span><span class="kw">buildIngredientExposuresTable</span>(</span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="dt">conn =</span> conn,</span>
<span id="cb4-4"><a href="#cb4-4"></a>  <span class="dt">cdmDatabaseSchema =</span> cdmDatabaseSchema,</span>
<span id="cb4-5"><a href="#cb4-5"></a>  <span class="dt">writeDatabaseSchema =</span> writeDatabaseSchema,</span>
<span id="cb4-6"><a href="#cb4-6"></a>  <span class="dt">drugExposureIngredientTable =</span> drugExposureIngredientTable</span>
<span id="cb4-7"><a href="#cb4-7"></a>)</span></code></pre></div>
</div>
<div id="row-count-history-1" class="section level4">
<h4>Row Count History</h4>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left">Table</th>
<th align="right">RowCount</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">INGREDIENT_EXPOSURE</td>
<td align="right">55834050</td>
</tr>
<tr class="even">
<td align="left">INGREDIENT_EXPOSURE_2020_08_08</td>
<td align="right">55834050</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="at-a-glance-1" class="section level4">
<h4>At a Glance</h4>
<div class="kable-table">
<table>
<colgroup>
<col width="15%"></col>
<col width="11%"></col>
<col width="17%"></col>
<col width="20%"></col>
<col width="16%"></col>
<col width="18%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="right">ingredient_concept_id</th>
<th align="right">drug_exposure_id</th>
<th align="left">drug_exposure_start_date</th>
<th align="left">drug_exposure_start_datetime</th>
<th align="left">drug_exposure_end_date</th>
<th align="left">drug_exposure_end_datetime</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1386957</td>
<td align="right">35150100</td>
<td align="left">2017-02-05</td>
<td align="left">2017-02-05 10:59:00</td>
<td align="left">2017-02-05</td>
<td align="left">2017-02-05 11:07:00</td>
</tr>
<tr class="even">
<td align="right">1314924</td>
<td align="right">163097</td>
<td align="left">2002-05-01</td>
<td align="left">2002-05-01 00:00:00</td>
<td align="left">2002-05-01</td>
<td align="left">2002-05-01 00:00:00</td>
</tr>
<tr class="odd">
<td align="right">44507676</td>
<td align="right">12176630</td>
<td align="left">2019-07-09</td>
<td align="left">2019-07-09 00:00:01</td>
<td align="left">2019-07-09</td>
<td align="left">2019-07-09 15:30:00</td>
</tr>
<tr class="even">
<td align="right">967823</td>
<td align="right">31937220</td>
<td align="left">2011-12-19</td>
<td align="left">2011-12-19 03:07:00</td>
<td align="left">2011-12-19</td>
<td align="left">2011-12-19 12:06:31</td>
</tr>
<tr class="odd">
<td align="right">19018013</td>
<td align="right">35604998</td>
<td align="left">2014-12-23</td>
<td align="left">2014-12-23 17:40:00</td>
<td align="left">2014-12-29</td>
<td align="left">2014-12-29 17:00:00</td>
</tr>
<tr class="even">
<td align="right">967823</td>
<td align="right">38615001</td>
<td align="left">2016-09-02</td>
<td align="left">2016-09-02 15:22:00</td>
<td align="left">2016-09-03</td>
<td align="left">2016-09-03 16:22:00</td>
</tr>
<tr class="odd">
<td align="right">967823</td>
<td align="right">15690699</td>
<td align="left">1999-12-31</td>
<td align="left">1999-12-31 07:51:00</td>
<td align="left">2000-01-01</td>
<td align="left">2000-01-01 07:51:00</td>
</tr>
<tr class="even">
<td align="right">1713332</td>
<td align="right">44919860</td>
<td align="left">2010-05-12</td>
<td align="left">2010-05-12 16:03:00</td>
<td align="left">2010-05-12</td>
<td align="left">2010-05-12 00:00:00</td>
</tr>
<tr class="odd">
<td align="right">922570</td>
<td align="right">44471040</td>
<td align="left">2009-01-29</td>
<td align="left">2009-01-29 15:26:00</td>
<td align="left">2009-01-29</td>
<td align="left">2009-01-29 00:00:00</td>
</tr>
<tr class="even">
<td align="right">19049105</td>
<td align="right">42011104</td>
<td align="left">2019-04-12</td>
<td align="left">2019-04-12 14:38:00</td>
<td align="left">2019-04-12</td>
<td align="left">2019-04-12 17:35:00</td>
</tr>
<tr class="odd">
<td align="right">948078</td>
<td align="right">38981541</td>
<td align="left">2016-06-22</td>
<td align="left">2016-06-22 18:24:00</td>
<td align="left">2016-06-28</td>
<td align="left">2016-06-28 12:19:00</td>
</tr>
<tr class="even">
<td align="right">19060896</td>
<td align="right">28733010</td>
<td align="left">2011-01-06</td>
<td align="left">2011-01-06 14:11:00</td>
<td align="left">2011-01-27</td>
<td align="left">2011-01-27 00:00:00</td>
</tr>
<tr class="odd">
<td align="right">955632</td>
<td align="right">14372272</td>
<td align="left">2004-10-21</td>
<td align="left">2004-10-21 11:00:00</td>
<td align="left">2004-10-21</td>
<td align="left">2004-10-21 11:00:00</td>
</tr>
<tr class="even">
<td align="right">42800027</td>
<td align="right">31614761</td>
<td align="left">2015-08-18</td>
<td align="left">2015-08-18 11:45:00</td>
<td align="left">2015-08-19</td>
<td align="left">2015-08-19 12:45:00</td>
</tr>
<tr class="odd">
<td align="right">1560524</td>
<td align="right">21422374</td>
<td align="left">2007-12-03</td>
<td align="left">2007-12-03 11:53:00</td>
<td align="left">2007-12-03</td>
<td align="left">2007-12-03 11:53:00</td>
</tr>
<tr class="even">
<td align="right">997276</td>
<td align="right">2761340</td>
<td align="left">1995-09-20</td>
<td align="left">1995-09-20 04:00:00</td>
<td align="left">1995-09-29</td>
<td align="left">1995-09-29 20:00:00</td>
</tr>
<tr class="odd">
<td align="right">948078</td>
<td align="right">27122250</td>
<td align="left">2014-02-08</td>
<td align="left">2014-02-08 10:21:00</td>
<td align="left">2014-02-10</td>
<td align="left">2014-02-10 16:55:00</td>
</tr>
<tr class="even">
<td align="right">19050832</td>
<td align="right">46725813</td>
<td align="left">2014-12-06</td>
<td align="left">2014-12-06 13:14:00</td>
<td align="left">2014-12-06</td>
<td align="left">2014-12-06 00:00:00</td>
</tr>
<tr class="odd">
<td align="right">791967</td>
<td align="right">9679238</td>
<td align="left">2007-02-18</td>
<td align="left">2007-02-18 15:15:00</td>
<td align="left">2007-02-21</td>
<td align="left">2007-02-21 13:11:00</td>
</tr>
<tr class="even">
<td align="right">1315946</td>
<td align="right">44574023</td>
<td align="left">2009-05-21</td>
<td align="left">2009-05-21 17:09:00</td>
<td align="left">2009-05-21</td>
<td align="left">2009-05-21 00:00:00</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div id="run-algorithm" class="section level1">
<h1>Run Algorithm</h1>
<p>The algorithm can be run once the tables are written in <a href="#setup">Setup</a>.</p>
<div id="requirements" class="section level2">
<h2>Requirements</h2>
<ol style="list-style-type: decimal">
<li>A database connection object <code>conn</code> to your OMOP CDM instance<br />
</li>
<li><code>writeDatabaseSchema</code> destination schema with write privileges<br />
</li>
<li><code>writeDatabaseSchema</code>.<code>vocabularyTable</code> &amp; <code>writeDatabaseSchema</code>.<code>drugExposureIngredientTable</code> Tables (see [“Setup”])</li>
</ol>
</div>
<div id="outputs-1" class="section level2">
<h2>Outputs</h2>
<div id="intermediate" class="section level3">
<h3>Intermediate</h3>
<ol style="list-style-type: decimal">
<li>Cohort Table <code>cohortTable</code>: Ingredient Exposure table filtered for all the RxNorm Ingredients that are descendants of a superclass comprised of one or more OMOP Vocabulary Concept Classes Concept Ids (<code>drug_classification_id_input</code>). By default, <code>drug_classification_id_input</code> is set to Concept Classes of <code>OncoRegimenFinder::atc_antineoplastic_id</code> and <code>OncoRegimenFinder::hemonc_classes</code>, but is modifiable according to user preference.<br />
</li>
<li>Regimen Staging Table <code>regimenStagingTable</code>: A copy of the Cohort Table. This table is written to serve as the data source for running OncoRegimenFinder against a cohort requiring non-standard <code>date_lag_input</code> and <code>regimen_repeats</code> parameters.</li>
</ol>
</div>
<div id="final" class="section level3">
<h3>Final</h3>
<ol style="list-style-type: decimal">
<li><em>Regimen Table <code>regimenTable</code></em>: Regimen Staging Table that is run through the OncoRegimenFinder algorithm according to the default <code>date_lag_input</code> and <code>regimen_repeats</code> values of 30 days and 5, respectively.<br />
</li>
<li><em>Regimen Ingredient Table <code>regimenIngredientTable</code></em>: Regimen Ingredient Table that maps the algorithm output in the Regimen Table to HemOnc Regimens in the <code>vocabularyTable</code> written in <a href="#setup">Setup</a>.</li>
</ol>
</div>
</div>
<div id="procedure-1" class="section level2">
<h2>Procedure</h2>
<div id="load-packages-1" class="section level3">
<h3>Load Packages</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">library</span>(OncoRegimenFinder)</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="kw">library</span>(tidyverse)</span></code></pre></div>
</div>
<div id="set-parameters-1" class="section level3">
<h3>Set Parameters</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># Schema of Source Person and Drug Exposure Tables</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>cdmDatabaseSchema &lt;-<span class="st"> &quot;omop_cdm_2&quot;</span></span>
<span id="cb6-3"><a href="#cb6-3"></a></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co"># Output Schema and Tables</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>writeDatabaseSchema &lt;-<span class="st"> &quot;patelm9&quot;</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>drugExposureIngredientTable &lt;-<span class="st"> &quot;ingredient_exposure&quot;</span></span>
<span id="cb6-7"><a href="#cb6-7"></a>cohortTable &lt;-<span class="st"> &quot;oncoregimenfinder_cohort&quot;</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>regimenTable &lt;-<span class="st"> &quot;oncoregimenfinder_regimen&quot;</span></span>
<span id="cb6-9"><a href="#cb6-9"></a>regimenStagingTable &lt;-<span class="st"> &quot;oncoregimenfinder_regimen_staging&quot;</span></span>
<span id="cb6-10"><a href="#cb6-10"></a>vocabularyTable &lt;-<span class="st"> &quot;oncoregimenfinder_vocabulary&quot;</span></span>
<span id="cb6-11"><a href="#cb6-11"></a>regimenIngredientTable &lt;-<span class="st"> &quot;oncoregimenfinder_regimen_ingredients&quot;</span></span>
<span id="cb6-12"><a href="#cb6-12"></a></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="co"># OMOP Vocabulary Drug Classes to filter Drug Exposures for</span></span>
<span id="cb6-14"><a href="#cb6-14"></a>drug_classification_id_input &lt;-<span class="st"> </span><span class="kw">c</span>( <span class="co"># ATC Antineoplastics (OncoRegimenFinder::atc_antineoplastics_id)</span></span>
<span id="cb6-15"><a href="#cb6-15"></a>  <span class="dv">21601387</span>,</span>
<span id="cb6-16"><a href="#cb6-16"></a>  <span class="co"># HemOnc Classes (OncoRegimenFinder::hemonc_classes)</span></span>
<span id="cb6-17"><a href="#cb6-17"></a>  <span class="dv">35101847</span>,</span>
<span id="cb6-18"><a href="#cb6-18"></a>  <span class="dv">35807195</span>,</span>
<span id="cb6-19"><a href="#cb6-19"></a>  <span class="dv">35807466</span>,</span>
<span id="cb6-20"><a href="#cb6-20"></a>  <span class="dv">35807470</span>,</span>
<span id="cb6-21"><a href="#cb6-21"></a>  <span class="dv">35807489</span></span>
<span id="cb6-22"><a href="#cb6-22"></a>)</span>
<span id="cb6-23"><a href="#cb6-23"></a>false_positive_id &lt;-</span>
<span id="cb6-24"><a href="#cb6-24"></a><span class="st">  </span><span class="co"># OncoRegimenFinder::falsepositives</span></span>
<span id="cb6-25"><a href="#cb6-25"></a><span class="st">  </span><span class="kw">c</span>(</span>
<span id="cb6-26"><a href="#cb6-26"></a>    <span class="dv">45775396</span>, <span class="dv">1304850</span>, <span class="dv">792993</span>, <span class="dv">19010482</span>, <span class="dv">19089602</span>,</span>
<span id="cb6-27"><a href="#cb6-27"></a>    <span class="dv">19080458</span>, <span class="dv">19104221</span>, <span class="dv">19065450</span>, <span class="dv">1510328</span>, <span class="dv">42903942</span>,</span>
<span id="cb6-28"><a href="#cb6-28"></a>    <span class="dv">1354698</span>, <span class="dv">1551860</span>, <span class="dv">19003472</span>, <span class="dv">1356009</span>, <span class="dv">40244464</span>,</span>
<span id="cb6-29"><a href="#cb6-29"></a>    <span class="dv">1303425</span>, <span class="dv">745466</span>, <span class="dv">1389464</span>, <span class="dv">19025194</span>, <span class="dv">740910</span>, <span class="dv">1710612</span>,</span>
<span id="cb6-30"><a href="#cb6-30"></a>    <span class="dv">35606631</span>, <span class="dv">19003999</span>, <span class="dv">985708</span>, <span class="dv">45775206</span>, <span class="dv">1308432</span>, <span class="dv">1522957</span>,</span>
<span id="cb6-31"><a href="#cb6-31"></a>    <span class="dv">1760616</span>, <span class="dv">950637</span>, <span class="dv">1300978</span>, <span class="dv">44816310</span>, <span class="dv">1500211</span>, <span class="dv">1506270</span>,</span>
<span id="cb6-32"><a href="#cb6-32"></a>    <span class="dv">923645</span>, <span class="dv">19061406</span>, <span class="dv">40171288</span>, <span class="dv">1388796</span>, <span class="dv">40168303</span>, <span class="dv">975125</span>,</span>
<span id="cb6-33"><a href="#cb6-33"></a>    <span class="dv">1507705</span>, <span class="dv">1511449</span>, <span class="dv">1738521</span>, <span class="dv">1548195</span>, <span class="dv">1518254</span>, <span class="dv">40222444</span>,</span>
<span id="cb6-34"><a href="#cb6-34"></a>    <span class="dv">1713332</span>, <span class="dv">1112807</span>, <span class="dv">19014878</span>, <span class="dv">19034726</span>, <span class="dv">984232</span>, <span class="dv">1525866</span>,</span>
<span id="cb6-35"><a href="#cb6-35"></a>    <span class="dv">989482</span>, <span class="dv">1550557</span>, <span class="dv">1551099</span>, <span class="dv">924120</span>, <span class="dv">904351</span></span>
<span id="cb6-36"><a href="#cb6-36"></a>  )</span>
<span id="cb6-37"><a href="#cb6-37"></a></span>
<span id="cb6-38"><a href="#cb6-38"></a><span class="co"># Date difference when assessing for drug combinations in the Drug Exposures table</span></span>
<span id="cb6-39"><a href="#cb6-39"></a>date_lag_input &lt;-<span class="st"> </span><span class="dv">30</span></span>
<span id="cb6-40"><a href="#cb6-40"></a>regimen_repeats &lt;-<span class="st"> </span><span class="dv">5</span></span></code></pre></div>
</div>
<div id="steps" class="section level3">
<h3>Steps</h3>
<ol style="list-style-type: decimal">
<li>Cohort, Regimen, and a copy of Regimen as “Regimen Staging” Tables are written.</li>
<li>Regimen Table undergoes further processing by combining overlapping instances of an ingredient start date and +/- the date lag input over the number of regimen repeats.<br />
</li>
<li>A final Regimen Ingredient Table joins the Vocabulary Table with the Regimen Table to map drug combinations derived from this algorithm back to the HemOnc ontology and other OMOP Concepts</li>
</ol>
<div id="write-cohort-and-regimen-staging-tables" class="section level4">
<h4>Write Cohort and Regimen Staging Tables</h4>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>OncoRegimenFinder<span class="op">::</span><span class="kw">buildCohortRegimenTable</span>(</span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="dt">conn =</span> conn,</span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="dt">cdmDatabaseSchema =</span> cdmDatabaseSchema,</span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="dt">writeDatabaseSchema =</span> writeDatabaseSchema,</span>
<span id="cb7-5"><a href="#cb7-5"></a>  <span class="dt">cohortTable =</span> cohortTable,</span>
<span id="cb7-6"><a href="#cb7-6"></a>  <span class="dt">regimenTable =</span> regimenTable,</span>
<span id="cb7-7"><a href="#cb7-7"></a>  <span class="dt">drug_classification_id_input =</span> drug_classification_id_input,</span>
<span id="cb7-8"><a href="#cb7-8"></a>  <span class="dt">false_positive_id =</span> false_positive_id</span>
<span id="cb7-9"><a href="#cb7-9"></a>)</span></code></pre></div>
<div id="cohort-table" class="section level5">
<h5>Cohort Table</h5>
<p>The <code>Cohort Table</code> selects for the Person Id, Drug Exposure Id with Start and End Dates for all Drug Concept Ids that are RxNorm Ingredients representing that Drug Exposure filtered for all descendants of the curated Drug Cl argument.</p>
<div id="at-a-glance-2" class="section level6">
<h6>At a Glance</h6>
<div class="kable-table">
<table>
<colgroup>
<col width="17%"></col>
<col width="10%"></col>
<col width="14%"></col>
<col width="17%"></col>
<col width="22%"></col>
<col width="20%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="right">drug_exposure_id</th>
<th align="right">person_id</th>
<th align="right">ingredient_id</th>
<th align="left">ingredient_name</th>
<th align="left">ingredient_start_date</th>
<th align="left">ingredient_end_date</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">47644948</td>
<td align="right">1011938</td>
<td align="right">1436678</td>
<td align="left">tamoxifen</td>
<td align="left">2017-08-31</td>
<td align="left">2017-10-12</td>
</tr>
<tr class="even">
<td align="right">106855</td>
<td align="right">249646</td>
<td align="right">1397599</td>
<td align="left">cisplatin</td>
<td align="left">2001-05-24</td>
<td align="left">2001-05-24</td>
</tr>
<tr class="odd">
<td align="right">27371936</td>
<td align="right">1118931</td>
<td align="right">19092845</td>
<td align="left">temsirolimus</td>
<td align="left">2011-07-28</td>
<td align="left">2011-07-28</td>
</tr>
<tr class="even">
<td align="right">42052715</td>
<td align="right">1504248</td>
<td align="right">1378382</td>
<td align="left">paclitaxel</td>
<td align="left">2019-03-01</td>
<td align="left">2019-03-01</td>
</tr>
<tr class="odd">
<td align="right">26940709</td>
<td align="right">1110335</td>
<td align="right">1338512</td>
<td align="left">doxorubicin</td>
<td align="left">2009-06-26</td>
<td align="left">2009-06-26</td>
</tr>
<tr class="even">
<td align="right">213626</td>
<td align="right">427666</td>
<td align="right">1314924</td>
<td align="left">gemcitabine</td>
<td align="left">2003-08-27</td>
<td align="left">2003-08-27</td>
</tr>
<tr class="odd">
<td align="right">43128354</td>
<td align="right">1553309</td>
<td align="right">1314924</td>
<td align="left">gemcitabine</td>
<td align="left">2020-02-07</td>
<td align="left">2020-02-07</td>
</tr>
<tr class="even">
<td align="right">17739074</td>
<td align="right">112829</td>
<td align="right">955632</td>
<td align="left">fluorouracil</td>
<td align="left">1992-10-28</td>
<td align="left">1992-10-29</td>
</tr>
<tr class="odd">
<td align="right">42971329</td>
<td align="right">1546725</td>
<td align="right">955632</td>
<td align="left">fluorouracil</td>
<td align="left">2019-11-04</td>
<td align="left">2019-11-04</td>
</tr>
<tr class="even">
<td align="right">47379330</td>
<td align="right">435083</td>
<td align="right">1341149</td>
<td align="left">temozolomide</td>
<td align="left">2018-10-05</td>
<td align="left">2018-10-16</td>
</tr>
<tr class="odd">
<td align="right">23882112</td>
<td align="right">1051349</td>
<td align="right">1367268</td>
<td align="left">irinotecan</td>
<td align="left">2011-05-19</td>
<td align="left">2011-05-19</td>
</tr>
<tr class="even">
<td align="right">16676202</td>
<td align="right">851572</td>
<td align="right">1397599</td>
<td align="left">cisplatin</td>
<td align="left">2005-04-25</td>
<td align="left">2005-04-25</td>
</tr>
<tr class="odd">
<td align="right">27465798</td>
<td align="right">1120358</td>
<td align="right">1351541</td>
<td align="left">leuprolide</td>
<td align="left">2012-04-05</td>
<td align="left">2012-04-05</td>
</tr>
<tr class="even">
<td align="right">31484322</td>
<td align="right">1198474</td>
<td align="right">1343346</td>
<td align="left">vinorelbine</td>
<td align="left">2014-01-17</td>
<td align="left">2014-01-17</td>
</tr>
<tr class="odd">
<td align="right">34380762</td>
<td align="right">1259489</td>
<td align="right">1397599</td>
<td align="left">cisplatin</td>
<td align="left">2013-10-07</td>
<td align="left">2013-10-07</td>
</tr>
<tr class="even">
<td align="right">7306035</td>
<td align="right">430871</td>
<td align="right">35603017</td>
<td align="left">trabectedin</td>
<td align="left">2001-11-20</td>
<td align="left">2001-11-21</td>
</tr>
<tr class="odd">
<td align="right">34437580</td>
<td align="right">1261238</td>
<td align="right">1315942</td>
<td align="left">docetaxel</td>
<td align="left">2013-05-29</td>
<td align="left">2013-05-29</td>
</tr>
<tr class="even">
<td align="right">45929838</td>
<td align="right">13935</td>
<td align="right">19026972</td>
<td align="left">lenalidomide</td>
<td align="left">2013-01-17</td>
<td align="left">2013-01-17</td>
</tr>
<tr class="odd">
<td align="right">42114100</td>
<td align="right">1506827</td>
<td align="right">1310317</td>
<td align="left">cyclophosphamide</td>
<td align="left">2018-11-14</td>
<td align="left">2018-11-15</td>
</tr>
<tr class="even">
<td align="right">26056937</td>
<td align="right">1093580</td>
<td align="right">1344905</td>
<td align="left">carboplatin</td>
<td align="left">2010-03-30</td>
<td align="left">2010-03-30</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="row-count-history-2" class="section level6">
<h6>Row Count History</h6>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left">Table</th>
<th align="right">RowCount</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ONCOREGIMENFINDER_COHORT</td>
<td align="right">5244273</td>
</tr>
<tr class="even">
<td align="left">ONCOREGIMENFINDER_COHORT_2020_07_15</td>
<td align="right">4553840</td>
</tr>
<tr class="odd">
<td align="left">ONCOREGIMENFINDER_COHORT_2020_07_28</td>
<td align="right">4554988</td>
</tr>
<tr class="even">
<td align="left">ONCOREGIMENFINDER_COHORT_2020_08_06</td>
<td align="right">613635</td>
</tr>
<tr class="odd">
<td align="left">ONCOREGIMENFINDER_COHORT_2020_08_07</td>
<td align="right">5244273</td>
</tr>
<tr class="even">
<td align="left">ONCOREGIMENFINDER_COHORT_2020_08_08</td>
<td align="right">104701978</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="regimen-staging-table" class="section level5">
<h5>Regimen Staging Table</h5>
<p>The final Regimen Table is derived from the Regimen Staging Table is also to source of Regimens used to process special cohort tables. The Regimen Staging Table also serves as the data source when running OncoRegimenFinder against special cohorts.</p>
<div id="at-a-glance-3" class="section level6">
<h6>At a Glance</h6>
<div class="kable-table">
<table>
<colgroup>
<col width="17%"></col>
<col width="10%"></col>
<col width="14%"></col>
<col width="17%"></col>
<col width="22%"></col>
<col width="20%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="right">drug_exposure_id</th>
<th align="right">person_id</th>
<th align="right">ingredient_id</th>
<th align="left">ingredient_name</th>
<th align="left">ingredient_start_date</th>
<th align="left">ingredient_end_date</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">22189698</td>
<td align="right">1017787</td>
<td align="right">1387104</td>
<td align="left">trastuzumab</td>
<td align="left">2008-04-16</td>
<td align="left">2008-04-16</td>
</tr>
<tr class="even">
<td align="right">28029397</td>
<td align="right">1131026</td>
<td align="right">1378382</td>
<td align="left">paclitaxel</td>
<td align="left">2010-03-12</td>
<td align="left">2010-03-12</td>
</tr>
<tr class="odd">
<td align="right">39382158</td>
<td align="right">1405048</td>
<td align="right">955632</td>
<td align="left">fluorouracil</td>
<td align="left">2016-11-09</td>
<td align="left">2016-11-10</td>
</tr>
<tr class="even">
<td align="right">4493166</td>
<td align="right">333869</td>
<td align="right">1387104</td>
<td align="left">trastuzumab</td>
<td align="left">2000-09-29</td>
<td align="left">2000-09-30</td>
</tr>
<tr class="odd">
<td align="right">47433999</td>
<td align="right">600267</td>
<td align="right">1118084</td>
<td align="left">celecoxib</td>
<td align="left">2015-12-02</td>
<td align="left">2016-08-08</td>
</tr>
<tr class="even">
<td align="right">18155922</td>
<td align="right">120534</td>
<td align="right">1350504</td>
<td align="left">etoposide</td>
<td align="left">1993-07-03</td>
<td align="left">1993-07-04</td>
</tr>
<tr class="odd">
<td align="right">6178934</td>
<td align="right">237347</td>
<td align="right">1318011</td>
<td align="left">oxaliplatin</td>
<td align="left">2015-06-24</td>
<td align="left">2015-06-24</td>
</tr>
<tr class="even">
<td align="right">25751540</td>
<td align="right">1087646</td>
<td align="right">955632</td>
<td align="left">fluorouracil</td>
<td align="left">2009-01-28</td>
<td align="left">2009-01-28</td>
</tr>
<tr class="odd">
<td align="right">40351518</td>
<td align="right">1436981</td>
<td align="right">1318011</td>
<td align="left">oxaliplatin</td>
<td align="left">2017-09-27</td>
<td align="left">2017-09-28</td>
</tr>
<tr class="even">
<td align="right">1959131</td>
<td align="right">272770</td>
<td align="right">1305058</td>
<td align="left">methotrexate</td>
<td align="left">1995-02-15</td>
<td align="left">1995-02-16</td>
</tr>
<tr class="odd">
<td align="right">43004274</td>
<td align="right">1547665</td>
<td align="right">1305058</td>
<td align="left">methotrexate</td>
<td align="left">2020-06-24</td>
<td align="left">2020-06-24</td>
</tr>
<tr class="even">
<td align="right">28443302</td>
<td align="right">1138644</td>
<td align="right">1314273</td>
<td align="left">rituximab</td>
<td align="left">2013-09-09</td>
<td align="left">2013-09-09</td>
</tr>
<tr class="odd">
<td align="right">50047727</td>
<td align="right">1516702</td>
<td align="right">1341149</td>
<td align="left">temozolomide</td>
<td align="left">2019-08-15</td>
<td align="left">2019-09-12</td>
</tr>
<tr class="even">
<td align="right">424435</td>
<td align="right">914233</td>
<td align="right">1378382</td>
<td align="left">paclitaxel</td>
<td align="left">2004-09-01</td>
<td align="left">2004-09-01</td>
</tr>
<tr class="odd">
<td align="right">25519712</td>
<td align="right">1083334</td>
<td align="right">1351541</td>
<td align="left">leuprolide</td>
<td align="left">2011-02-08</td>
<td align="left">2011-02-08</td>
</tr>
<tr class="even">
<td align="right">19844138</td>
<td align="right">967231</td>
<td align="right">1337620</td>
<td align="left">capecitabine</td>
<td align="left">2009-01-23</td>
<td align="left">2009-01-29</td>
</tr>
<tr class="odd">
<td align="right">18876514</td>
<td align="right">945711</td>
<td align="right">1310317</td>
<td align="left">cyclophosphamide</td>
<td align="left">2005-03-25</td>
<td align="left">2005-03-25</td>
</tr>
<tr class="even">
<td align="right">42915835</td>
<td align="right">1543670</td>
<td align="right">1318011</td>
<td align="left">oxaliplatin</td>
<td align="left">2019-06-27</td>
<td align="left">2019-06-27</td>
</tr>
<tr class="odd">
<td align="right">5158869</td>
<td align="right">872592</td>
<td align="right">1314924</td>
<td align="left">gemcitabine</td>
<td align="left">2010-07-23</td>
<td align="left">2010-07-23</td>
</tr>
<tr class="even">
<td align="right">46159168</td>
<td align="right">1246829</td>
<td align="right">1341149</td>
<td align="left">temozolomide</td>
<td align="left">2013-08-07</td>
<td align="left">2013-08-11</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="row-count-history-3" class="section level6">
<h6>Row Count History</h6>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left">Table</th>
<th align="right">RowCount</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ONCOREGIMENFINDER_REGIMEN_STAGING</td>
<td align="right">5244273</td>
</tr>
<tr class="even">
<td align="left">ONCOREGIMENFINDER_REGIMEN_STAGING_2020_08_06</td>
<td align="right">613635</td>
</tr>
<tr class="odd">
<td align="left">ONCOREGIMENFINDER_REGIMEN_STAGING_2020_08_07</td>
<td align="right">5244273</td>
</tr>
<tr class="even">
<td align="left">ONCOREGIMENFINDER_REGIMEN_STAGING_2020_08_08</td>
<td align="right">104701978</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="process-regimen-table" class="section level4">
<h4>Process Regimen Table</h4>
<p>The Regimen Table is grouped by Person Id, Drug Exposure Id, Ingredient and Ingredient Start Date and joined onto itself based on overlapping window of time by +/= the Date Lag Input parameter and iterated on based on the Regimen Repeats given.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a></span>
<span id="cb8-2"><a href="#cb8-2"></a>OncoRegimenFinder<span class="op">::</span><span class="kw">processRegimenTable</span>(</span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="dt">conn =</span> conn,</span>
<span id="cb8-4"><a href="#cb8-4"></a>  <span class="dt">writeDatabaseSchema =</span> writeDatabaseSchema,</span>
<span id="cb8-5"><a href="#cb8-5"></a>  <span class="dt">regimenTable =</span> regimenTable,</span>
<span id="cb8-6"><a href="#cb8-6"></a>  <span class="dt">date_lag_input =</span> date_lag_input,</span>
<span id="cb8-7"><a href="#cb8-7"></a>  <span class="dt">regimen_repeats =</span> regimen_repeats</span>
<span id="cb8-8"><a href="#cb8-8"></a>)</span></code></pre></div>
<div id="regimen-table" class="section level5">
<h5>Regimen Table</h5>
<div id="at-a-glance-4" class="section level6">
<h6>At a Glance</h6>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="right">person_id</th>
<th align="right">drug_exposure_id</th>
<th align="left">ingredient_name</th>
<th align="left">ingredient_start_date</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1123109</td>
<td align="right">27618113</td>
<td align="left">carboplatin</td>
<td align="left">2014-12-30</td>
</tr>
<tr class="even">
<td align="right">475250</td>
<td align="right">12809553</td>
<td align="left">anastrozole</td>
<td align="left">2012-05-15</td>
</tr>
<tr class="odd">
<td align="right">1466182</td>
<td align="right">41219699</td>
<td align="left">pembrolizumab</td>
<td align="left">2019-03-01</td>
</tr>
<tr class="even">
<td align="right">1029080</td>
<td align="right">22751131</td>
<td align="left">lanreotide</td>
<td align="left">2017-05-24</td>
</tr>
<tr class="odd">
<td align="right">806824</td>
<td align="right">15390007</td>
<td align="left">fluorouracil</td>
<td align="left">1990-06-25</td>
</tr>
<tr class="even">
<td align="right">1169272</td>
<td align="right">47903092</td>
<td align="left">anastrozole</td>
<td align="left">2018-12-28</td>
</tr>
<tr class="odd">
<td align="right">1348072</td>
<td align="right">37555198</td>
<td align="left">gemcitabine</td>
<td align="left">2015-07-22</td>
</tr>
<tr class="even">
<td align="right">1096248</td>
<td align="right">26185823</td>
<td align="left">bevacizumab</td>
<td align="left">2009-04-23</td>
</tr>
<tr class="odd">
<td align="right">1372170</td>
<td align="right">48829445</td>
<td align="left">erlotinib</td>
<td align="left">2016-03-31</td>
</tr>
<tr class="even">
<td align="right">631787</td>
<td align="right">9320195</td>
<td align="left">thiotepa</td>
<td align="left">2002-02-05</td>
</tr>
<tr class="odd">
<td align="right">939234</td>
<td align="right">18017386</td>
<td align="left">trastuzumab</td>
<td align="left">2014-05-14</td>
</tr>
<tr class="even">
<td align="right">39545</td>
<td align="right">12141804</td>
<td align="left">gemcitabine</td>
<td align="left">2014-10-10</td>
</tr>
<tr class="odd">
<td align="right">1346897</td>
<td align="right">37529899</td>
<td align="left">trastuzumab</td>
<td align="left">2016-03-16</td>
</tr>
<tr class="even">
<td align="right">1466447</td>
<td align="right">41234510</td>
<td align="left">leuprolide</td>
<td align="left">2018-08-03</td>
</tr>
<tr class="odd">
<td align="right">925430</td>
<td align="right">432939</td>
<td align="left">docetaxel</td>
<td align="left">2006-05-03</td>
</tr>
<tr class="even">
<td align="right">337109</td>
<td align="right">4560846</td>
<td align="left">docetaxel</td>
<td align="left">2005-01-05</td>
</tr>
<tr class="odd">
<td align="right">1400382</td>
<td align="right">39213297</td>
<td align="left">fluorouracil</td>
<td align="left">2016-10-20</td>
</tr>
<tr class="even">
<td align="right">1517756</td>
<td align="right">42379278</td>
<td align="left">floxuridine</td>
<td align="left">2019-07-10</td>
</tr>
<tr class="odd">
<td align="right">447769</td>
<td align="right">7746120</td>
<td align="left">carboplatin</td>
<td align="left">2008-01-24</td>
</tr>
<tr class="even">
<td align="right">1113292</td>
<td align="right">26998052</td>
<td align="left">paclitaxel</td>
<td align="left">2009-08-25</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="row-count-history-4" class="section level6">
<h6>Row Count History</h6>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left">Table</th>
<th align="right">RowCount</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ONCOREGIMENFINDER_REGIMEN</td>
<td align="right">5244273</td>
</tr>
<tr class="even">
<td align="left">ONCOREGIMENFINDER_REGIMEN_2020_07_15</td>
<td align="right">4553362</td>
</tr>
<tr class="odd">
<td align="left">ONCOREGIMENFINDER_REGIMEN_2020_07_28</td>
<td align="right">4554510</td>
</tr>
<tr class="even">
<td align="left">ONCOREGIMENFINDER_REGIMEN_2020_08_06</td>
<td align="right">613603</td>
</tr>
<tr class="odd">
<td align="left">ONCOREGIMENFINDER_REGIMEN_2020_08_07</td>
<td align="right">5244273</td>
</tr>
<tr class="even">
<td align="left">ONCOREGIMENFINDER_REGIMEN_2020_08_08</td>
<td align="right">104701978</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="write-regimen-ingredient-table" class="section level4">
<h4>Write Regimen Ingredient Table</h4>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">createRegimenIngrTable</span>(</span>
<span id="cb9-2"><a href="#cb9-2"></a>  <span class="dt">conn =</span> conn,</span>
<span id="cb9-3"><a href="#cb9-3"></a>  <span class="dt">writeDatabaseSchema =</span> <span class="st">&quot;patelm9&quot;</span>,</span>
<span id="cb9-4"><a href="#cb9-4"></a>  <span class="dt">cohortTable =</span> <span class="st">&quot;oncoregimenfinder_cohort&quot;</span>,</span>
<span id="cb9-5"><a href="#cb9-5"></a>  <span class="dt">regimenTable =</span> <span class="st">&quot;oncoregimenfinder_regimen&quot;</span>,</span>
<span id="cb9-6"><a href="#cb9-6"></a>  <span class="dt">regimenIngredientTable =</span> <span class="st">&quot;oncoregimenfinder_regimen_ingredients&quot;</span>,</span>
<span id="cb9-7"><a href="#cb9-7"></a>  <span class="dt">vocabularyTable =</span> <span class="st">&quot;oncoregimenfinder_vocabulary&quot;</span></span>
<span id="cb9-8"><a href="#cb9-8"></a>)</span></code></pre></div>
<div id="regimen-ingredient-table" class="section level5">
<h5>Regimen Ingredient Table</h5>
<div id="at-a-glance-5" class="section level6">
<h6>At a Glance</h6>
<div class="kable-table">
<table>
<colgroup>
<col width="4%"></col>
<col width="6%"></col>
<col width="7%"></col>
<col width="8%"></col>
<col width="8%"></col>
<col width="17%"></col>
<col width="4%"></col>
<col width="21%"></col>
<col width="10%"></col>
<col width="10%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="right">person_id</th>
<th align="right">drug_exposure_id</th>
<th align="left">ingredient_name</th>
<th align="left">ingredient_start_date</th>
<th align="left">ingredient_end_date</th>
<th align="left">derived_regimen_name</th>
<th align="right">regimen_id</th>
<th align="left">regimen_name</th>
<th align="left">derived_regimen_start_date</th>
<th align="left">derived_regimen_end_date</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1190021</td>
<td align="right">31070847</td>
<td align="left">bevacizumab</td>
<td align="left">2012-05-30</td>
<td align="left">2012-05-30</td>
<td align="left">bevacizumab</td>
<td align="right">35804263</td>
<td align="left">Doxorubicin non-pegylated liposomal and Bevacizumab</td>
<td align="left">2012-05-30</td>
<td align="left">2012-05-30</td>
</tr>
<tr class="even">
<td align="right">19745</td>
<td align="right">11418196</td>
<td align="left">methotrexate</td>
<td align="left">2005-03-11</td>
<td align="left">2005-03-11</td>
<td align="left">fluorouracil, methotrexate</td>
<td align="right">35804805</td>
<td align="left">Fluorouracil and Methotrexate</td>
<td align="left">2005-03-11</td>
<td align="left">2005-04-07</td>
</tr>
<tr class="odd">
<td align="right">1154112</td>
<td align="right">29256247</td>
<td align="left">gemcitabine</td>
<td align="left">2013-08-13</td>
<td align="left">2013-08-13</td>
<td align="left">gemcitabine, vinorelbine</td>
<td align="right">35806176</td>
<td align="left">Gemcitabine and Vinorelbine</td>
<td align="left">2013-08-13</td>
<td align="left">2013-09-03</td>
</tr>
<tr class="even">
<td align="right">244626</td>
<td align="right">9730032</td>
<td align="left">doxorubicin</td>
<td align="left">2001-06-18</td>
<td align="left">2001-06-19</td>
<td align="left">cyclophosphamide, doxorubicin</td>
<td align="right">35804208</td>
<td align="left">ddAC</td>
<td align="left">2001-05-21</td>
<td align="left">2001-06-19</td>
</tr>
<tr class="odd">
<td align="right">1032021</td>
<td align="right">22873478</td>
<td align="left">daratumumab</td>
<td align="left">2018-02-28</td>
<td align="left">2018-03-01</td>
<td align="left">daratumumab</td>
<td align="right">35806063</td>
<td align="left">Daratumumab monotherapy</td>
<td align="left">2018-01-31</td>
<td align="left">2018-03-01</td>
</tr>
<tr class="even">
<td align="right">1136382</td>
<td align="right">28325023</td>
<td align="left">bevacizumab</td>
<td align="left">2013-12-26</td>
<td align="left">2013-12-26</td>
<td align="left">bevacizumab</td>
<td align="right">35804319</td>
<td align="left">Bevacizumab-containing therapy</td>
<td align="left">2013-12-26</td>
<td align="left">2014-01-24</td>
</tr>
<tr class="odd">
<td align="right">304529</td>
<td align="right">3319885</td>
<td align="left">vincristine</td>
<td align="left">1996-05-02</td>
<td align="left">1996-05-03</td>
<td align="left">cyclophosphamide, doxorubicin, vincristine</td>
<td align="right">42542351</td>
<td align="left">CAV and RT</td>
<td align="left">1996-04-04</td>
<td align="left">1996-05-03</td>
</tr>
<tr class="even">
<td align="right">1011683</td>
<td align="right">46664835</td>
<td align="left">ivosidenib</td>
<td align="left">2014-10-17</td>
<td align="left">2014-10-17</td>
<td align="left">ivosidenib</td>
<td align="right">35803517</td>
<td align="left">Ivosidenib monotherapy</td>
<td align="left">2014-09-26</td>
<td align="left">2014-10-17</td>
</tr>
<tr class="odd">
<td align="right">268675</td>
<td align="right">1764826</td>
<td align="left">doxorubicin</td>
<td align="left">1994-11-08</td>
<td align="left">1994-11-09</td>
<td align="left">cyclophosphamide, doxorubicin</td>
<td align="right">35804208</td>
<td align="left">ddAC</td>
<td align="left">1994-11-08</td>
<td align="left">1994-11-30</td>
</tr>
<tr class="even">
<td align="right">947315</td>
<td align="right">18969214</td>
<td align="left">capecitabine</td>
<td align="left">2007-10-18</td>
<td align="left">2007-11-07</td>
<td align="left">capecitabine</td>
<td align="right">35806890</td>
<td align="left">Capecitabine and RT</td>
<td align="left">2007-10-18</td>
<td align="left">2007-11-07</td>
</tr>
<tr class="odd">
<td align="right">1031307</td>
<td align="right">22874672</td>
<td align="left">docetaxel</td>
<td align="left">2008-03-21</td>
<td align="left">2008-03-21</td>
<td align="left">docetaxel</td>
<td align="right">35805681</td>
<td align="left">Docetaxel and S-1</td>
<td align="left">2008-03-21</td>
<td align="left">2008-03-21</td>
</tr>
<tr class="even">
<td align="right">959461</td>
<td align="right">19489335</td>
<td align="left">gemcitabine</td>
<td align="left">2008-12-18</td>
<td align="left">2008-12-18</td>
<td align="left">gemcitabine</td>
<td align="right">35804135</td>
<td align="left">Gemcitabine monotherapy</td>
<td align="left">2008-12-11</td>
<td align="left">2009-01-08</td>
</tr>
<tr class="odd">
<td align="right">1105653</td>
<td align="right">26700634</td>
<td align="left">carboplatin</td>
<td align="left">2018-08-21</td>
<td align="left">2018-08-22</td>
<td align="left">carboplatin, paclitaxel</td>
<td align="right">35804318</td>
<td align="left">Carboplatin and nab-Paclitaxel</td>
<td align="left">2018-07-26</td>
<td align="left">2018-08-22</td>
</tr>
<tr class="even">
<td align="right">1234708</td>
<td align="right">33209293</td>
<td align="left">doxorubicin</td>
<td align="left">2012-10-24</td>
<td align="left">2012-10-24</td>
<td align="left">cyclophosphamide, doxorubicin</td>
<td align="right">35804199</td>
<td align="left">AC</td>
<td align="left">2012-09-26</td>
<td align="left">2012-10-24</td>
</tr>
<tr class="odd">
<td align="right">1025991</td>
<td align="right">22653269</td>
<td align="left">bevacizumab</td>
<td align="left">2010-08-03</td>
<td align="left">2010-08-03</td>
<td align="left">bevacizumab</td>
<td align="right">35804319</td>
<td align="left">Bevacizumab-containing therapy</td>
<td align="left">2010-08-03</td>
<td align="left">2010-08-31</td>
</tr>
<tr class="even">
<td align="right">987660</td>
<td align="right">20769061</td>
<td align="left">rituximab</td>
<td align="left">2006-12-19</td>
<td align="left">2006-12-19</td>
<td align="left">rituximab</td>
<td align="right">35803432</td>
<td align="left">Rituximab monotherapy</td>
<td align="left">2006-12-19</td>
<td align="left">2006-12-19</td>
</tr>
<tr class="odd">
<td align="right">1456095</td>
<td align="right">40934818</td>
<td align="left">gemcitabine</td>
<td align="left">2017-12-18</td>
<td align="left">2017-12-19</td>
<td align="left">gemcitabine, paclitaxel</td>
<td align="right">35804567</td>
<td align="left">Gemcitabine and nab-Paclitaxel</td>
<td align="left">2017-12-05</td>
<td align="left">2017-12-30</td>
</tr>
<tr class="even">
<td align="right">269795</td>
<td align="right">1751977</td>
<td align="left">interferon alfa-2b</td>
<td align="left">1996-12-27</td>
<td align="left">1997-01-26</td>
<td align="left">interferon alfa-2b</td>
<td align="right">35806117</td>
<td align="left">Interferon alfa-2b monotherapy</td>
<td align="left">1996-12-27</td>
<td align="left">1997-01-26</td>
</tr>
<tr class="odd">
<td align="right">131614</td>
<td align="right">762790</td>
<td align="left">fluorouracil</td>
<td align="left">1996-07-26</td>
<td align="left">1996-08-02</td>
<td align="left">fluorouracil</td>
<td align="right">35804807</td>
<td align="left">Fluorouracil and Semustine</td>
<td align="left">1996-07-26</td>
<td align="left">1996-08-02</td>
</tr>
<tr class="even">
<td align="right">6315</td>
<td align="right">10878450</td>
<td align="left">paclitaxel</td>
<td align="left">2008-09-22</td>
<td align="left">2008-09-22</td>
<td align="left">paclitaxel</td>
<td align="right">35804166</td>
<td align="left">Paclitaxel monotherapy</td>
<td align="left">2008-09-22</td>
<td align="left">2008-09-22</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="row-count-history-5" class="section level6">
<h6>Row Count History</h6>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left">Table</th>
<th align="right">RowCount</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ONCOREGIMENFINDER_REGIMEN_INGREDIENTS</td>
<td align="right">9078320</td>
</tr>
<tr class="even">
<td align="left">ONCOREGIMENFINDER_REGIMEN_INGREDIENTS_2020_07_15</td>
<td align="right">4554796</td>
</tr>
<tr class="odd">
<td align="left">ONCOREGIMENFINDER_REGIMEN_INGREDIENTS_2020_07_28</td>
<td align="right">4558240</td>
</tr>
<tr class="even">
<td align="left">ONCOREGIMENFINDER_REGIMEN_INGREDIENTS_2020_08_06</td>
<td align="right">613885</td>
</tr>
<tr class="odd">
<td align="left">ONCOREGIMENFINDER_REGIMEN_INGREDIENTS_2020_08_08</td>
<td align="right">5247103</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
