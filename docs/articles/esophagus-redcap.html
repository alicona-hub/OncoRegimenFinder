<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>esophagus-redcap â€¢ OncoRegimenFinder</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="esophagus-redcap">
<meta property="og:description" content="OncoRegimenFinder">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">OncoRegimenFinder</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/esophagus-redcap.html">esophagus-redcap</a>
    </li>
    <li>
      <a href="../articles/setup-maintenance.html">setup-maintenance</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="esophagus-redcap_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>esophagus-redcap</h1>
            
      
      
      <div class="hidden name"><code>esophagus-redcap.Rmd</code></div>

    </div>

    
    
<div id="setup" class="section level2">
<h2 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h2>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tidyverse</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">rlang</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">rubix</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">OncoRegimenFinder</span>)</pre></body></html></div>
</div>
<div id="summary" class="section level2">
<h2 class="hasAnchor">
<a href="#summary" class="anchor"></a>Summary</h2>
<p>The results of the OncoRegimenFinder algorithm is compared to the abstracted Esophagus REDCap cohort treatment data.</p>
</div>
<div id="esophagus-cohort-oncoregimenfinder" class="section level2">
<h2 class="hasAnchor">
<a href="#esophagus-cohort-oncoregimenfinder" class="anchor"></a>Esophagus Cohort OncoRegimenFinder</h2>
<div id="source-tables" class="section level3">
<h3 class="hasAnchor">
<a href="#source-tables" class="anchor"></a>Source Tables:</h3>
<ol style="list-style-type: decimal">
<li>Esophagus Cohort Table<br>
</li>
<li>OncoRegimenFinder Regimen Ingredient Table</li>
</ol>
<p>An Esophagus Cohort table is currently present in the OMOP <code>patelm9.esophagus_cohort</code> table:</p>
<table class="table">
<thead><tr>
<th style="text-align:left;">
project_cohort_mrn
</th>
<th style="text-align:left;">
ptid
</th>
<th style="text-align:left;">
project_cohort_source
</th>
<th style="text-align:right;">
person_id
</th>
<th style="text-align:left;">
mrn
</th>
<th style="text-align:right;">
pt_deidentification_id
</th>
<th style="text-align:right;">
patientid
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
00043478
</td>
<td style="text-align:left;">
MSKEGC0082
</td>
<td style="text-align:left;">
STGIEsophagogastricS_DATA_2020-06-24_1748
</td>
<td style="text-align:right;">
42471
</td>
<td style="text-align:left;">
00043478
</td>
<td style="text-align:right;">
393502
</td>
<td style="text-align:right;">
301504
</td>
</tr>
<tr>
<td style="text-align:left;">
00165329
</td>
<td style="text-align:left;">
MSKEGC0083
</td>
<td style="text-align:left;">
STGIEsophagogastricS_DATA_2020-06-24_1748
</td>
<td style="text-align:right;">
110192
</td>
<td style="text-align:left;">
00165329
</td>
<td style="text-align:right;">
993175
</td>
<td style="text-align:right;">
163341
</td>
</tr>
<tr>
<td style="text-align:left;">
00167176
</td>
<td style="text-align:left;">
MSKEGC0084
</td>
<td style="text-align:left;">
STGIEsophagogastricS_DATA_2020-06-24_1748
</td>
<td style="text-align:right;">
112009
</td>
<td style="text-align:left;">
00167176
</td>
<td style="text-align:right;">
995242
</td>
<td style="text-align:right;">
301508
</td>
</tr>
<tr>
<td style="text-align:left;">
00170650
</td>
<td style="text-align:left;">
MSKEGC0009
</td>
<td style="text-align:left;">
STGIEsophagogastricS_DATA_2020-06-24_1748
</td>
<td style="text-align:right;">
115457
</td>
<td style="text-align:left;">
00170650
</td>
<td style="text-align:right;">
999682
</td>
<td style="text-align:right;">
269485
</td>
</tr>
<tr>
<td style="text-align:left;">
00177521
</td>
<td style="text-align:left;">
MSKEGC0096
</td>
<td style="text-align:left;">
STGIEsophagogastricS_DATA_2020-06-24_1748
</td>
<td style="text-align:right;">
122243
</td>
<td style="text-align:left;">
00177521
</td>
<td style="text-align:right;">
1007830
</td>
<td style="text-align:right;">
135744
</td>
</tr>
<tr>
<td style="text-align:left;">
00178632
</td>
<td style="text-align:left;">
MSKEGC0097
</td>
<td style="text-align:left;">
STGIEsophagogastricS_DATA_2020-06-24_1748
</td>
<td style="text-align:right;">
123332
</td>
<td style="text-align:left;">
00178632
</td>
<td style="text-align:right;">
1009058
</td>
<td style="text-align:right;">
161112
</td>
</tr>
</tbody>
</table>
<p>The <code>patelm9.oncoregimenfinder_regimen_ingredient</code> table is as follows:</p>
<table class="table">
<thead><tr>
<th style="text-align:right;">
person_id
</th>
<th style="text-align:right;">
drug_exposure_id
</th>
<th style="text-align:left;">
ingredient
</th>
<th style="text-align:left;">
ingredient_start_date
</th>
<th style="text-align:left;">
ingredient_end_date
</th>
<th style="text-align:left;">
regimen
</th>
<th style="text-align:right;">
hemonc_concept_id
</th>
<th style="text-align:left;">
reg_name
</th>
<th style="text-align:left;">
regimen_start_date
</th>
<th style="text-align:left;">
regimen_end_date
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1367673
</td>
<td style="text-align:right;">
38165979
</td>
<td style="text-align:left;">
bortezomib
</td>
<td style="text-align:left;">
2015-11-30
</td>
<td style="text-align:left;">
2015-12-01
</td>
<td style="text-align:left;">
bortezomib
</td>
<td style="text-align:right;">
35804520
</td>
<td style="text-align:left;">
Bortezomib monotherapy
</td>
<td style="text-align:left;">
2015-11-20
</td>
<td style="text-align:left;">
2015-12-04
</td>
</tr>
<tr>
<td style="text-align:right;">
1412383
</td>
<td style="text-align:right;">
39608826
</td>
<td style="text-align:left;">
fluorouracil
</td>
<td style="text-align:left;">
2017-04-07
</td>
<td style="text-align:left;">
2017-04-08
</td>
<td style="text-align:left;">
fluorouracil,oxaliplatin
</td>
<td style="text-align:right;">
42542362
</td>
<td style="text-align:left;">
FUOX
</td>
<td style="text-align:left;">
2017-03-13
</td>
<td style="text-align:left;">
2017-04-09
</td>
</tr>
<tr>
<td style="text-align:right;">
1418445
</td>
<td style="text-align:right;">
39800379
</td>
<td style="text-align:left;">
doxorubicin
</td>
<td style="text-align:left;">
2017-03-10
</td>
<td style="text-align:left;">
2017-03-11
</td>
<td style="text-align:left;">
bleomycin,doxorubicin,vinblastine
</td>
<td style="text-align:right;">
35807089
</td>
<td style="text-align:left;">
ABV (Vinblastine)
</td>
<td style="text-align:left;">
2017-02-10
</td>
<td style="text-align:left;">
2017-03-11
</td>
</tr>
<tr>
<td style="text-align:right;">
838771
</td>
<td style="text-align:right;">
16268453
</td>
<td style="text-align:left;">
fluorouracil
</td>
<td style="text-align:left;">
2011-08-30
</td>
<td style="text-align:left;">
2011-08-30
</td>
<td style="text-align:left;">
fluorouracil
</td>
<td style="text-align:right;">
35804769
</td>
<td style="text-align:left;">
Fluorouracil monotherapy
</td>
<td style="text-align:left;">
2011-08-30
</td>
<td style="text-align:left;">
2011-08-30
</td>
</tr>
<tr>
<td style="text-align:right;">
739060
</td>
<td style="text-align:right;">
364005
</td>
<td style="text-align:left;">
oxaliplatin
</td>
<td style="text-align:left;">
2008-02-11
</td>
<td style="text-align:left;">
2008-02-11
</td>
<td style="text-align:left;">
bevacizumab,fluorouracil,oxaliplatin
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2008-02-11
</td>
<td style="text-align:left;">
2008-02-11
</td>
</tr>
<tr>
<td style="text-align:right;">
1085868
</td>
<td style="text-align:right;">
25662359
</td>
<td style="text-align:left;">
pemetrexed
</td>
<td style="text-align:left;">
2010-10-06
</td>
<td style="text-align:left;">
2010-10-06
</td>
<td style="text-align:left;">
bevacizumab,pemetrexed
</td>
<td style="text-align:right;">
35806410
</td>
<td style="text-align:left;">
Pemetrexed and Bevacizumab
</td>
<td style="text-align:left;">
2010-10-06
</td>
<td style="text-align:left;">
2010-10-27
</td>
</tr>
</tbody>
</table>
</div>
<div id="sql" class="section level3">
<h3 class="hasAnchor">
<a href="#sql" class="anchor"></a>SQL</h3>
<p>The following SQL is used to join the 2 Source Tables:</p>
<pre><code>#&gt; SELECT 
#&gt; patelm9.esophagus_cohort.person_id AS esophagus_person_id
#&gt; ,patelm9.esophagus_cohort.ptid
#&gt; ,patelm9.oncoregimenfinder_regimen_ingredients.*
#&gt;  FROM patelm9.esophagus_cohort
#&gt;  LEFT JOIN patelm9.oncoregimenfinder_regimen_ingredients ON patelm9.oncoregimenfinder_regimen_ingredients.person_id = patelm9.esophagus_cohort.person_id
#&gt; ;</code></pre>
The resulting output:
<table class="table">
<thead><tr>
<th style="text-align:left;">
esophagus_person_id
</th>
<th style="text-align:left;">
ptid
</th>
<th style="text-align:left;">
person_id
</th>
<th style="text-align:left;">
drug_exposure_id
</th>
<th style="text-align:left;">
ingredient
</th>
<th style="text-align:left;">
ingredient_start_date
</th>
<th style="text-align:left;">
ingredient_end_date
</th>
<th style="text-align:left;">
regimen
</th>
<th style="text-align:left;">
hemonc_concept_id
</th>
<th style="text-align:left;">
reg_name
</th>
<th style="text-align:left;">
regimen_start_date
</th>
<th style="text-align:left;">
regimen_end_date
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
112009
</td>
<td style="text-align:left;">
MSKEGC0084
</td>
<td style="text-align:left;">
112009
</td>
<td style="text-align:left;">
17696417
</td>
<td style="text-align:left;">
oxaliplatin
</td>
<td style="text-align:left;">
2018-05-21
</td>
<td style="text-align:left;">
2018-05-22
</td>
<td style="text-align:left;">
oxaliplatin
</td>
<td style="text-align:left;">
35805078
</td>
<td style="text-align:left;">
Oxaliplatin monotherapy
</td>
<td style="text-align:left;">
2018-05-03
</td>
<td style="text-align:left;">
2018-05-22
</td>
</tr>
<tr>
<td style="text-align:left;">
112009
</td>
<td style="text-align:left;">
MSKEGC0084
</td>
<td style="text-align:left;">
112009
</td>
<td style="text-align:left;">
17696416
</td>
<td style="text-align:left;">
oxaliplatin
</td>
<td style="text-align:left;">
2018-05-03
</td>
<td style="text-align:left;">
2018-05-04
</td>
<td style="text-align:left;">
oxaliplatin
</td>
<td style="text-align:left;">
35805078
</td>
<td style="text-align:left;">
Oxaliplatin monotherapy
</td>
<td style="text-align:left;">
2018-05-03
</td>
<td style="text-align:left;">
2018-05-22
</td>
</tr>
<tr>
<td style="text-align:left;">
112009
</td>
<td style="text-align:left;">
MSKEGC0084
</td>
<td style="text-align:left;">
112009
</td>
<td style="text-align:left;">
17696418
</td>
<td style="text-align:left;">
oxaliplatin
</td>
<td style="text-align:left;">
2018-06-05
</td>
<td style="text-align:left;">
2018-06-06
</td>
<td style="text-align:left;">
oxaliplatin
</td>
<td style="text-align:left;">
35805078
</td>
<td style="text-align:left;">
Oxaliplatin monotherapy
</td>
<td style="text-align:left;">
2018-06-05
</td>
<td style="text-align:left;">
2018-06-06
</td>
</tr>
<tr>
<td style="text-align:left;">
225659
</td>
<td style="text-align:left;">
MSKEGC0103
</td>
<td style="text-align:left;">
225659
</td>
<td style="text-align:left;">
13532829
</td>
<td style="text-align:left;">
ramucirumab
</td>
<td style="text-align:left;">
2018-04-05
</td>
<td style="text-align:left;">
2018-04-06
</td>
<td style="text-align:left;">
ramucirumab
</td>
<td style="text-align:left;">
35805372
</td>
<td style="text-align:left;">
Ramucirumab monotherapy
</td>
<td style="text-align:left;">
2018-04-05
</td>
<td style="text-align:left;">
2018-04-06
</td>
</tr>
<tr>
<td style="text-align:left;">
239542
</td>
<td style="text-align:left;">
MSKEGC0090
</td>
<td style="text-align:left;">
239542
</td>
<td style="text-align:left;">
6265129
</td>
<td style="text-align:left;">
paclitaxel
</td>
<td style="text-align:left;">
2015-01-29
</td>
<td style="text-align:left;">
2015-01-29
</td>
<td style="text-align:left;">
paclitaxel
</td>
<td style="text-align:left;">
35804166
</td>
<td style="text-align:left;">
Paclitaxel monotherapy
</td>
<td style="text-align:left;">
2015-01-29
</td>
<td style="text-align:left;">
2015-02-13
</td>
</tr>
<tr>
<td style="text-align:left;">
239542
</td>
<td style="text-align:left;">
MSKEGC0090
</td>
<td style="text-align:left;">
239542
</td>
<td style="text-align:left;">
6265130
</td>
<td style="text-align:left;">
paclitaxel
</td>
<td style="text-align:left;">
2015-02-05
</td>
<td style="text-align:left;">
2015-02-05
</td>
<td style="text-align:left;">
paclitaxel
</td>
<td style="text-align:left;">
35804166
</td>
<td style="text-align:left;">
Paclitaxel monotherapy
</td>
<td style="text-align:left;">
2015-01-29
</td>
<td style="text-align:left;">
2015-02-13
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="oncoregimenfinder-results-summary" class="section level2">
<h2 class="hasAnchor">
<a href="#oncoregimenfinder-results-summary" class="anchor"></a>OncoRegimenFinder Results Summary</h2>
<div id="missingness" class="section level3">
<h3 class="hasAnchor">
<a href="#missingness" class="anchor"></a>Missingness</h3>
<p>Analysis of OncoRegimenFinder results shows that out of the unique OMOP Person Id count of 1428 patients in the Esophagus Cohort overall, only 582 Person Ids were resulted from OncoRegimenFinder.</p>
<p>Full Metrics:</p>
<pre><code>#&gt; # A tibble: 12 x 6
#&gt;    Variable              COUNT DISTINCT_COUNT NA_COUNT NA_STR_COUNT BLANK_COUNT
#&gt;    &lt;chr&gt;                 &lt;chr&gt; &lt;chr&gt;          &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt;      
#&gt;  1 esophagus_person_id   7725  1428           0        0            0          
#&gt;  2 ptid                  7725  1428           0        0            0          
#&gt;  3 person_id             7725  582            861      0            0          
#&gt;  4 drug_exposure_id      7725  6242           861      0            0          
#&gt;  5 ingredient            7725  40             861      0            0          
#&gt;  6 ingredient_start_date 7725  1533           861      0            0          
#&gt;  7 ingredient_end_date   7725  1625           861      0            0          
#&gt;  8 regimen               7725  106            861      0            0          
#&gt;  9 hemonc_concept_id     7725  53             1749     0            0          
#&gt; 10 reg_name              7725  53             1749     0            0          
#&gt; 11 regimen_start_date    7725  1195           861      0            0          
#&gt; 12 regimen_end_date      7725  1225           861      0            0</code></pre>
</div>
</div>
<div id="redcap-data" class="section level2">
<h2 class="hasAnchor">
<a href="#redcap-data" class="anchor"></a>REDCap Data</h2>
<p>The REDCap Data is exported as a tabular file and the main patient identifier and all variables associated with oncology treatments are selected.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r">
<span class="no">identifier_vars</span> <span class="kw">&lt;-</span> <span class="st">"ptid"</span>
<span class="no">treatment_vars</span> <span class="kw">&lt;-</span>
          <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'neoadj_regimen'</span>,
          <span class="st">'neoadj_tx_additional_drugs'</span>,
          <span class="st">'neoadj_tx_addtl_drugs_2'</span>,
          <span class="st">'crt_name'</span>,
          <span class="st">'neoadjcrt_tx_additional_drugs'</span>,
          <span class="st">'neoadjcrt_tx_addtl_drugs_2'</span>,
          <span class="st">'adj_regimen'</span>,
          <span class="st">'adj_tx_additional_drugs'</span>,
          <span class="st">'adj_tx_addtl_drugs_2'</span>,
          <span class="st">'adj_rt_concurrent'</span>,
          <span class="st">'adjcrt_tx_additional_drugs'</span>,
          <span class="st">'adjcrt_tx_addtl_drugs_2'</span>,
          <span class="st">'induction_regimen'</span>,
          <span class="st">'periop_neo_regimen'</span>,
          <span class="st">'periop_adj_regimen'</span>,
          <span class="st">'tx_name'</span>,
          <span class="st">'advanced_tx_additional_drugs'</span>,
          <span class="st">'advanced_tx_addtl_drugs_2'</span>,
          <span class="st">'tx_maintenance_drugs'</span>,
          <span class="st">'advanced_tx_addtl_drugsm1_1'</span>,
          <span class="st">'advanced_tx_addtl_drugsm1_2'</span>,
          <span class="st">'tx_maintenance2_drugs'</span>,
          <span class="st">'advanced_tx_addtl_drugsm2_1'</span>,
          <span class="st">'advanced_tx_addtl_drugsm2_2'</span>,
          <span class="st">'palliative_rt_concurrent'</span>,
          <span class="st">'neoadj_tx_base_regimen'</span>,
          <span class="st">'neoadjcrt_tx_base_regimen'</span>,
          <span class="st">'adj_tx_base_regimen'</span>,
          <span class="st">'adjcrt_tx_base_regimen'</span>,
          <span class="st">'advanced_tx_base_regimen'</span>,
          <span class="st">'regimen_name_m1'</span>,
          <span class="st">'regimen_name_m2'</span>,
          <span class="st">'hipec_drugs'</span>)</pre></body></html></div>
<p>For each of the Variables, a copy of the REDCap Data is selected for the Patient Identifier (<code>ptid</code>) and the Variable, as well as any associated Start and Stop Dates and placed in a list object.</p>
<p>The output is a list of the length of the <code>treament_vars</code>, where each position of the list occupied by the Patient Identifier, the treatment_var, and all the possible date data associated with that treatment. Unlike other REDCap projects where there is a single set of start and end dates associated with the treatment, the Esophagus REDCap took it an extra step by including valuable clinical context information in their data collection. For example, the Variable <code>regimen_name_2</code> has the following possible dates: tx_start-tx_stop, tx_pre_maintenance_start-tx_pre_maintenance_stop, and tx_pre_maintenance2_start-tx_pre_maintenance2_stop.</p>
<pre><code>#&gt; # A tibble: 32 x 8
#&gt;    ptid  regimen_name_m2 tx_start tx_maintenance_â€¦ tx_maintenance2â€¦
#&gt;    &lt;chr&gt; &lt;chr&gt;           &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;           
#&gt;  1 MSKEâ€¦ FOLFOX + Trastâ€¦ 2016-12â€¦ 2017-02-08       2019-08-14      
#&gt;  2 MSKEâ€¦ Other           2017-02â€¦ 2017-06-08       2017-12-11      
#&gt;  3 MSKEâ€¦ Pembrolizumab   2017-03â€¦ 2017-10-03       2019-10-09      
#&gt;  4 MSKEâ€¦ CAPOX +Trastuzâ€¦ 2017-04â€¦ 2017-10-12       2018-05-10      
#&gt;  5 MSKEâ€¦ CAPOX +Trastuzâ€¦ 2017-05â€¦ 2017-10-25       2018-06-13      
#&gt;  6 MSKEâ€¦ CAPOX +Trastuzâ€¦ 2018-08â€¦ 2019-03-13       2019-05-22      
#&gt;  7 MSKEâ€¦ 5-FU+Trastuzumâ€¦ 2019-01â€¦ 2019-03-06       2019-08-07      
#&gt;  8 MSKEâ€¦ FOLFOX (5-FU +â€¦ 2016-08â€¦ 2016-12-05       2017-03-06      
#&gt;  9 MSKEâ€¦ FOLFIRI (5-FU â€¦ 2019-03â€¦ 2019-07-03       2019-08-21      
#&gt; 10 MSKEâ€¦ Capecitabine    2019-07â€¦ 2019-11-20       2020-02-05      
#&gt; # â€¦ with 22 more rows, and 3 more variables: tx_pre_maintenance_stop &lt;chr&gt;,
#&gt; #   tx_pre_maintenance2_stop &lt;chr&gt;, tx_stop &lt;chr&gt;</code></pre>
<p>For this particular project, 21 Variables have more than 1 set of start-stop dates for treatments due to contextual differences.</p>
<p>In order to manage the one-to-many relationship between a treatment and the contextual start and stop dates, the all the date Variables data are pivoted and the context is separated from the <code>DateType</code>, whether the <code>Date</code> represents a start or stop of a treatment.</p>
<pre><code>#&gt; # A tibble: 14,646 x 6
#&gt;    VARIABLE       ptid       PV     Context   DateType   Date      
#&gt;    &lt;chr&gt;          &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;     
#&gt;  1 neoadj_regimen MSKEGC0040 FOLFOX neoadj    start      2018-04-05
#&gt;  2 neoadj_regimen MSKEGC0040 FOLFOX crt       start_date &lt;NA&gt;      
#&gt;  3 neoadj_regimen MSKEGC0040 FOLFOX adj       start      &lt;NA&gt;      
#&gt;  4 neoadj_regimen MSKEGC0040 FOLFOX adj_rt    start      &lt;NA&gt;      
#&gt;  5 neoadj_regimen MSKEGC0040 FOLFOX induction start      &lt;NA&gt;      
#&gt;  6 neoadj_regimen MSKEGC0040 FOLFOX neoadj    stop       2018-06-07
#&gt;  7 neoadj_regimen MSKEGC0040 FOLFOX crt       stop_date  &lt;NA&gt;      
#&gt;  8 neoadj_regimen MSKEGC0040 FOLFOX adj       stop       &lt;NA&gt;      
#&gt;  9 neoadj_regimen MSKEGC0040 FOLFOX adj_rt    stop       &lt;NA&gt;      
#&gt; 10 neoadj_regimen MSKEGC0040 FOLFOX induction stop       &lt;NA&gt;      
#&gt; # â€¦ with 14,636 more rows</code></pre>
<p>Lastly, the data is massaged into the Patient Events Table Format, thereby successfully isolating the start-stop date concept pairs to a single observation level. At this stage any rows where both the Event Start and End Date are NA or blank are filtered out.</p>
<pre><code>#&gt; # A tibble: 10,868 x 6
#&gt;    VARIABLE       ptid       PV     Context   EVENT_START_DATE EVENT_END_DATE
#&gt;    &lt;chr&gt;          &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt;         
#&gt;  1 neoadj_regimen MSKEGC0040 FOLFOX neoadj    2018-04-05       2018-06-07    
#&gt;  2 neoadj_regimen MSKEGC0040 FOLFOX crt       NA               NA            
#&gt;  3 neoadj_regimen MSKEGC0040 FOLFOX adj       NA               NA            
#&gt;  4 neoadj_regimen MSKEGC0040 FOLFOX adj_rt    NA               NA            
#&gt;  5 neoadj_regimen MSKEGC0040 FOLFOX induction NA               NA            
#&gt;  6 neoadj_regimen MSKEGC0042 FLOT   neoadj    2017-11-30       2018-01-10    
#&gt;  7 neoadj_regimen MSKEGC0042 FLOT   crt       NA               NA            
#&gt;  8 neoadj_regimen MSKEGC0042 FLOT   adj       2018-04-25       2018-05-09    
#&gt;  9 neoadj_regimen MSKEGC0042 FLOT   adj_rt    NA               NA            
#&gt; 10 neoadj_regimen MSKEGC0042 FLOT   induction NA               NA            
#&gt; # â€¦ with 10,858 more rows</code></pre>
<p>The REDCap Data is then joined with the Esophagus Cohort Data on the <code>ptid</code> Variable to be able to map the data back to the OMOP Person Id. The Event Date columns are copied to additional <code>NORMALIZE</code> columns. These columns will also be added to the OncoRegimenFinder results in order to perform a union and to compare the accuracy between the 2 data sources.</p>
<pre><code>#&gt; Joining, by = "ptid"
#&gt; # A tibble: 4,495 x 9
#&gt;    VARIABLE ptid  PV    Context EVENT_START_DATE EVENT_END_DATE person_id
#&gt;    &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;            &lt;chr&gt;              &lt;dbl&gt;
#&gt;  1 neoadj_â€¦ MSKEâ€¦ FOLFâ€¦ neoadj  2018-04-05       2018-06-07        859261
#&gt;  2 neoadj_â€¦ MSKEâ€¦ FLOT  neoadj  2017-11-30       2018-01-10       1199120
#&gt;  3 neoadj_â€¦ MSKEâ€¦ FLOT  adj     2018-04-25       2018-05-09       1199120
#&gt;  4 neoadj_â€¦ MSKEâ€¦ EOX â€¦ neoadj  2017-03-01       &lt;NA&gt;             1421563
#&gt;  5 neoadj_â€¦ MSKEâ€¦ FOLFâ€¦ neoadj  2017-08-02       2017-08-02       1284231
#&gt;  6 neoadj_â€¦ MSKEâ€¦ FLOT  neoadj  2018-10-16       2018-11-27       1295920
#&gt;  7 neoadj_â€¦ MSKEâ€¦ Capeâ€¦ adj     2018-05-24       2018-07-11       1308346
#&gt;  8 neoadj_â€¦ MSKEâ€¦ Capeâ€¦ neoadj  2014-12-26       2015-01-16       1327098
#&gt;  9 neoadj_â€¦ MSKEâ€¦ Capeâ€¦ adj     2015-04-22       2015-06-01       1327098
#&gt; 10 neoadj_â€¦ MSKEâ€¦ mDCF  neoadj  2015-08-31       2016-01-14       1355614
#&gt; # â€¦ with 4,485 more rows, and 2 more variables: NORMALIZE_START_DATE &lt;chr&gt;,
#&gt; #   NORMALIZE_END_DATE &lt;chr&gt;</code></pre>
<p>To prepare the REDCap Data for the join with the OncoRegimenFinder results for a side-by-side comparison, the last step is grouping the REDCap Data by Person Id.</p>
<p>The OncoRegimenFinder results is also be grouped based on Person Id, allowing for specific joins at the person level after copying the Date data into their corresponding <code>NORMALIZE</code> columns.</p>
<pre><code>#&gt; # A tibble: 7,725 x 14
#&gt;    esophagus_persoâ€¦ ptid  person_id drug_exposure_id ingredient ingredient_starâ€¦
#&gt;    &lt;chr&gt;            &lt;chr&gt;     &lt;int&gt; &lt;chr&gt;            &lt;chr&gt;      &lt;chr&gt;           
#&gt;  1 112009           MSKEâ€¦    112009 17696417         oxaliplatâ€¦ 2018-05-21      
#&gt;  2 112009           MSKEâ€¦    112009 17696416         oxaliplatâ€¦ 2018-05-03      
#&gt;  3 112009           MSKEâ€¦    112009 17696418         oxaliplatâ€¦ 2018-06-05      
#&gt;  4 225659           MSKEâ€¦    225659 13532829         ramucirumâ€¦ 2018-04-05      
#&gt;  5 239542           MSKEâ€¦    239542 6265129          paclitaxel 2015-01-29      
#&gt;  6 239542           MSKEâ€¦    239542 6265130          paclitaxel 2015-02-05      
#&gt;  7 239542           MSKEâ€¦    239542 6265131          paclitaxel 2015-02-13      
#&gt;  8 239542           MSKEâ€¦    239542 6265139          oxaliplatâ€¦ 2015-03-03      
#&gt;  9 239542           MSKEâ€¦    239542 6265140          oxaliplatâ€¦ 2015-03-17      
#&gt; 10 239542           MSKEâ€¦    239542 6265141          oxaliplatâ€¦ 2015-03-31      
#&gt; # â€¦ with 7,715 more rows, and 8 more variables: ingredient_end_date &lt;chr&gt;,
#&gt; #   regimen &lt;chr&gt;, hemonc_concept_id &lt;chr&gt;, reg_name &lt;chr&gt;,
#&gt; #   regimen_start_date &lt;chr&gt;, regimen_end_date &lt;chr&gt;,
#&gt; #   NORMALIZE_START_DATE &lt;chr&gt;, NORMALIZE_END_DATE &lt;chr&gt;</code></pre>
<p>The data from both sources are then blended, with a <code>DATA_SOURCE</code> column to demarcate whether the source was OMOP or REDCap.</p>
</div>
<div id="notably-incorrect" class="section level2">
<h2 class="hasAnchor">
<a href="#notably-incorrect" class="anchor"></a>Notably Incorrect</h2>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="no">final_output</span>$<span class="no">`1558617`</span>)
<span class="co">#&gt; # A tibble: 12 x 20</span>
<span class="co">#&gt;    DATA_SOURCE VARIABLE ptid  PV    Context EVENT_START_DATE EVENT_END_DATE</span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;            &lt;chr&gt;         </span>
<span class="co">#&gt;  1 REDCAP      tx_name  MSKEâ€¦ FLOT  tx      2019-04-24       2020-01-30    </span>
<span class="co">#&gt;  2 REDCAP      tx_name  MSKEâ€¦ FLOT  tx_maiâ€¦ 2019-11-07       &lt;NA&gt;          </span>
<span class="co">#&gt;  3 REDCAP      tx_name  MSKEâ€¦ FLOT  tx_preâ€¦ &lt;NA&gt;             2019-06-10    </span>
<span class="co">#&gt;  4 REDCAP      tx_mainâ€¦ MSKEâ€¦ FOLFâ€¦ tx      2019-04-24       2020-01-30    </span>
<span class="co">#&gt;  5 REDCAP      tx_mainâ€¦ MSKEâ€¦ FOLFâ€¦ tx_maiâ€¦ 2019-11-07       &lt;NA&gt;          </span>
<span class="co">#&gt;  6 REDCAP      tx_mainâ€¦ MSKEâ€¦ FOLFâ€¦ tx_preâ€¦ &lt;NA&gt;             2019-06-10    </span>
<span class="co">#&gt;  7 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt;  8 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt;  9 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt; 10 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt; 11 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt; 12 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt; # â€¦ with 13 more variables: person_id &lt;dbl&gt;, NORMALIZE_START_DATE &lt;chr&gt;,</span>
<span class="co">#&gt; #   NORMALIZE_END_DATE &lt;chr&gt;, esophagus_person_id &lt;chr&gt;,</span>
<span class="co">#&gt; #   drug_exposure_id &lt;chr&gt;, ingredient &lt;chr&gt;, ingredient_start_date &lt;chr&gt;,</span>
<span class="co">#&gt; #   ingredient_end_date &lt;chr&gt;, regimen &lt;chr&gt;, hemonc_concept_id &lt;chr&gt;,</span>
<span class="co">#&gt; #   reg_name &lt;chr&gt;, regimen_start_date &lt;chr&gt;, regimen_end_date &lt;chr&gt;</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="no">final_output</span>$<span class="no">`1557156`</span>)
<span class="co">#&gt; # A tibble: 14 x 20</span>
<span class="co">#&gt;    DATA_SOURCE VARIABLE ptid  PV    Context EVENT_START_DATE EVENT_END_DATE</span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;            &lt;chr&gt;         </span>
<span class="co">#&gt;  1 REDCAP      crt_name MSKEâ€¦ Durvâ€¦ crt     2019-10-16       2019-12-10    </span>
<span class="co">#&gt;  2 REDCAP      crt_name MSKEâ€¦ Durvâ€¦ inductâ€¦ 2019-09-18       2019-10-02    </span>
<span class="co">#&gt;  3 REDCAP      inductiâ€¦ MSKEâ€¦ Folfâ€¦ crt     2019-10-16       2019-12-10    </span>
<span class="co">#&gt;  4 REDCAP      inductiâ€¦ MSKEâ€¦ Folfâ€¦ inductâ€¦ 2019-09-18       2019-10-02    </span>
<span class="co">#&gt;  5 REDCAP      tx_name  MSKEâ€¦ Folfâ€¦ tx      2020-01-27       &lt;NA&gt;          </span>
<span class="co">#&gt;  6 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt;  7 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt;  8 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt;  9 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt; 10 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt; 11 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt; 12 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt; 13 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt; 14 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt; # â€¦ with 13 more variables: person_id &lt;dbl&gt;, NORMALIZE_START_DATE &lt;chr&gt;,</span>
<span class="co">#&gt; #   NORMALIZE_END_DATE &lt;chr&gt;, esophagus_person_id &lt;chr&gt;,</span>
<span class="co">#&gt; #   drug_exposure_id &lt;chr&gt;, ingredient &lt;chr&gt;, ingredient_start_date &lt;chr&gt;,</span>
<span class="co">#&gt; #   ingredient_end_date &lt;chr&gt;, regimen &lt;chr&gt;, hemonc_concept_id &lt;chr&gt;,</span>
<span class="co">#&gt; #   reg_name &lt;chr&gt;, regimen_start_date &lt;chr&gt;, regimen_end_date &lt;chr&gt;</span></pre></body></html></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Meera Patel.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
