<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Esophagus REDCap Cohort â€¢ OncoRegimenFinder</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="Esophagus REDCap Cohort">
<meta property="og:description" content="OncoRegimenFinder">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">OncoRegimenFinder</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../../articles/OncoRegimenFinder.html">Get started</a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    <li>
      <a href="../../articles/index.html">More...</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="esophagus_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Esophagus REDCap Cohort</h1>
            
      
      
      <div class="hidden name"><code>esophagus.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tidyverse</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">rlang</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">rubix</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">OncoRegimenFinder</span>)</pre></body></html></div>
<div id="summary" class="section level1">
<h1 class="hasAnchor">
<a href="#summary" class="anchor"></a>Summary</h1>
<p>The results of the OncoRegimenFinder algorithm is compared to the abstracted Esophagus REDCap cohort treatment data.</p>
</div>
<div id="esophagus-cohort-oncoregimenfinder" class="section level1">
<h1 class="hasAnchor">
<a href="#esophagus-cohort-oncoregimenfinder" class="anchor"></a>Esophagus Cohort OncoRegimenFinder</h1>
<div id="source-tables" class="section level2">
<h2 class="hasAnchor">
<a href="#source-tables" class="anchor"></a>Source Tables:</h2>
<ol style="list-style-type: decimal">
<li>Esophagus Cohort Table<br>
</li>
<li>OncoRegimenFinder Regimen Ingredient Table</li>
</ol>
<p><strong>Esophagus Cohort Table</strong> <code>patelm9.esophagus_cohort</code>:</p>
<pre><code>#&gt;    project_cohort_mrn       ptid                     project_cohort_source
#&gt; 1            00043478 MSKEGC0082 STGIEsophagogastricS_DATA_2020-06-24_1748
#&gt; 2            00165329 MSKEGC0083 STGIEsophagogastricS_DATA_2020-06-24_1748
#&gt; 3            00167176 MSKEGC0084 STGIEsophagogastricS_DATA_2020-06-24_1748
#&gt; 4            00170650 MSKEGC0009 STGIEsophagogastricS_DATA_2020-06-24_1748
#&gt; 5            00177521 MSKEGC0096 STGIEsophagogastricS_DATA_2020-06-24_1748
#&gt; 6            00178632 MSKEGC0097 STGIEsophagogastricS_DATA_2020-06-24_1748
#&gt; 7            00187040 MSKEGC0085 STGIEsophagogastricS_DATA_2020-06-24_1748
#&gt; 8            00284428 MSKEGC0103 STGIEsophagogastricS_DATA_2020-06-24_1748
#&gt; 9            00299171 MSKEGC0090 STGIEsophagogastricS_DATA_2020-06-24_1748
#&gt; 10           00301932 MSKEGC0091 STGIEsophagogastricS_DATA_2020-06-24_1748
#&gt; 11           00302678 MSKEGC1328 STGIEsophagogastricS_DATA_2020-06-24_1748
#&gt; 12           00313968 MSKEGC0104 STGIEsophagogastricS_DATA_2020-06-24_1748
#&gt; 13           00315387 MSKEGC0110 STGIEsophagogastricS_DATA_2020-06-24_1748
#&gt; 14           00326419 MSKEGC1330 STGIEsophagogastricS_DATA_2020-06-24_1748
#&gt; 15           00350303 MSKEGC0093 STGIEsophagogastricS_DATA_2020-06-24_1748
#&gt; 16           00361162 MSKEGC0098 STGIEsophagogastricS_DATA_2020-06-24_1748
#&gt; 17           00361162 MSKEGC0098 STGIEsophagogastricS_DATA_2020-06-24_1748
#&gt; 18           00372250 MSKEGC0111 STGIEsophagogastricS_DATA_2020-06-24_1748
#&gt; 19           00378725 MSKEGC0112 STGIEsophagogastricS_DATA_2020-06-24_1748
#&gt; 20           00390857 MSKEGC0086 STGIEsophagogastricS_DATA_2020-06-24_1748
#&gt;    person_id      mrn pt_deidentification_id patientid
#&gt; 1      42471 00043478                 393502    301504
#&gt; 2     110192 00165329                 993175    163341
#&gt; 3     112009 00167176                 995242    301508
#&gt; 4     115457 00170650                 999682    269485
#&gt; 5     122243 00177521                1007830    135744
#&gt; 6     123332 00178632                1009058    161112
#&gt; 7     131635 00187040                   6478    301471
#&gt; 8     225659 00284428                 651872    135747
#&gt; 9     239542 00299171                 171002    183391
#&gt; 10    242265 00301932                 302692    346608
#&gt; 11    243007 00302678                 304871    112323
#&gt; 12    253830 00313968                 931920    207046
#&gt; 13    255160 00315387                 959111    189961
#&gt; 14    265954 00326419                  28954    346585
#&gt; 15    289566 00350303                  59115    109374
#&gt; 16    300308 00361162                  71500    126821
#&gt; 17    300308 00361162                  71500    364108
#&gt; 18    311292 00372250                  85748    203526
#&gt; 19    317699 00378725                  93929    262086
#&gt; 20    329687 00390857                 108944    322086</code></pre>
<p><strong>OncoRegimenFinder Regimen Ingredient Table</strong><br><code>patelm9.oncoregimenfinder_regimen_ingredient</code>:</p>
<pre><code>#&gt;    person_id drug_exposure_id  ingredient_name ingredient_start_date
#&gt; 1    1129753         27947028      gemcitabine            2018-01-05
#&gt; 2     404973         10005121     temozolomide            2003-11-13
#&gt; 3    1138683         28440867      gemcitabine            2013-02-06
#&gt; 4    1234471         33187266        docetaxel            2013-02-11
#&gt; 5     942308         18708802      gemcitabine            2007-01-22
#&gt; 6    1317259         36519654      floxuridine            2016-01-19
#&gt; 7    1424181         39985334        cisplatin            2017-05-08
#&gt; 8    1487334         41591378     fluorouracil            2018-05-15
#&gt; 9    1144673         28769543       paclitaxel            2010-08-19
#&gt; 10    134229         18530126     fluorouracil            2006-07-14
#&gt; 11   1110274         26963227         afatinib            2011-03-23
#&gt; 12    962080         19644291        cisplatin            2005-10-26
#&gt; 13    491087          8228526      carboplatin            2004-11-18
#&gt; 14   1152862         29190812 cyclophosphamide            2010-11-18
#&gt; 15   1057051         44731134        etoposide            2009-11-06
#&gt; 16    965520           458357     fluorouracil            2007-04-13
#&gt; 17   1121011         27509375        cisplatin            2009-10-28
#&gt; 18    969834         19974511      carboplatin            2012-11-30
#&gt; 19   1111429         27004443      gemcitabine            2009-09-29
#&gt; 20   1072535         24986178       paclitaxel            2009-05-14
#&gt;    ingredient_end_date                  derived_regimen_name regimen_id
#&gt; 1           2018-01-06                           gemcitabine   42542297
#&gt; 2           2003-12-10                          temozolomide   35803684
#&gt; 3           2013-02-06                           gemcitabine   35804152
#&gt; 4           2013-02-11                docetaxel, gemcitabine   35803577
#&gt; 5           2007-01-22                           gemcitabine   42542297
#&gt; 6           2016-02-02 floxuridine, fluorouracil, irinotecan         NA
#&gt; 7           2017-05-10                             cisplatin   35805680
#&gt; 8           2018-05-17 bevacizumab, fluorouracil, irinotecan         NA
#&gt; 9           2010-08-19               paclitaxel, trastuzumab   35804201
#&gt; 10          2006-07-14                          fluorouracil   35804534
#&gt; 11          2011-04-21                   afatinib, cetuximab   42542279
#&gt; 12          2005-10-26                 cisplatin, irinotecan   35805332
#&gt; 13          2004-11-18              carboplatin, gemcitabine   35804156
#&gt; 14          2010-11-18          cyclophosphamide, epirubicin   35804236
#&gt; 15          2009-11-06                             etoposide   35803691
#&gt; 16          2007-04-13 bevacizumab, fluorouracil, irinotecan         NA
#&gt; 17          2009-10-28                             cisplatin   35803573
#&gt; 18          2012-11-30  carboplatin, doxorubicin, paclitaxel         NA
#&gt; 19          2009-09-29                           gemcitabine   35804152
#&gt; 20          2009-05-14               paclitaxel, trastuzumab   35804234
#&gt;                   regimen_name derived_regimen_start_date
#&gt; 1          Gemcitabine and S-1                 2017-12-08
#&gt; 2        RT, then Temozolomide                 2003-11-13
#&gt; 3           Gemcitabine and RT                 2013-01-30
#&gt; 4    Docetaxel and Gemcitabine                 2013-01-14
#&gt; 5          Gemcitabine and S-1                 2007-01-22
#&gt; 6                         &lt;NA&gt;                 2016-01-19
#&gt; 7            Cisplatin and S-1                 2017-04-17
#&gt; 8                         &lt;NA&gt;                 2018-05-15
#&gt; 9                   TH (Taxol)                 2010-07-22
#&gt; 10         Fluorouracil and RT                 2006-06-30
#&gt; 11      Afatinib and Cetuximab                 2011-02-23
#&gt; 12   Cisplatin, Irinotecan, RT                 2005-10-19
#&gt; 13 Carboplatin and Gemcitabine                 2004-10-28
#&gt; 14                        ddEC                 2010-11-18
#&gt; 15       Etoposide monotherapy                 2009-11-06
#&gt; 16                        &lt;NA&gt;                 2007-04-13
#&gt; 17       Cisplatin monotherapy                 2009-10-21
#&gt; 18                        &lt;NA&gt;                 2012-11-14
#&gt; 19          Gemcitabine and RT                 2009-09-29
#&gt; 20                ddTH (Taxol)                 2009-05-14
#&gt;    derived_regimen_end_date
#&gt; 1                2018-01-06
#&gt; 2                2003-12-10
#&gt; 3                2013-02-06
#&gt; 4                2013-02-11
#&gt; 5                2007-01-22
#&gt; 6                2016-02-18
#&gt; 7                2017-05-10
#&gt; 8                2018-06-14
#&gt; 9                2010-08-19
#&gt; 10               2006-07-28
#&gt; 11               2011-04-21
#&gt; 12               2005-11-16
#&gt; 13               2004-11-18
#&gt; 14               2010-12-16
#&gt; 15               2009-11-06
#&gt; 16               2007-04-13
#&gt; 17               2009-11-18
#&gt; 18               2012-12-14
#&gt; 19               2009-10-27
#&gt; 20               2009-05-14</code></pre>
<div id="sql" class="section level3">
<h3 class="hasAnchor">
<a href="#sql" class="anchor"></a>SQL</h3>
<p>The following SQL is used to join the 2 Source Tables:</p>
<pre><code>#&gt; SELECT 
#&gt; patelm9.esophagus_cohort.person_id AS esophagus_person_id
#&gt; ,patelm9.esophagus_cohort.ptid
#&gt; ,patelm9.oncoregimenfinder_regimen_ingredients.*
#&gt;  FROM patelm9.esophagus_cohort
#&gt;  LEFT JOIN patelm9.oncoregimenfinder_regimen_ingredients ON patelm9.oncoregimenfinder_regimen_ingredients.person_id = patelm9.esophagus_cohort.person_id
#&gt; ;</code></pre>
<p><strong>Output</strong>:</p>
<pre><code>#&gt; # A tibble: 20 x 12
#&gt;    esophagus_persoâ€¦ ptid  person_id drug_exposure_id ingredient_name
#&gt;    &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt;          
#&gt;  1 42471            MSKEâ€¦ 42471     12248879         fluorouracil   
#&gt;  2 42471            MSKEâ€¦ 42471     12248826         oxaliplatin    
#&gt;  3 42471            MSKEâ€¦ 42471     12248871         fluorouracil   
#&gt;  4 42471            MSKEâ€¦ 42471     12248872         fluorouracil   
#&gt;  5 42471            MSKEâ€¦ 42471     12248824         oxaliplatin    
#&gt;  6 42471            MSKEâ€¦ 42471     12248824         oxaliplatin    
#&gt;  7 42471            MSKEâ€¦ 42471     12248873         fluorouracil   
#&gt;  8 42471            MSKEâ€¦ 42471     12248873         fluorouracil   
#&gt;  9 42471            MSKEâ€¦ 42471     12248880         fluorouracil   
#&gt; 10 42471            MSKEâ€¦ 42471     12248826         oxaliplatin    
#&gt; 11 42471            MSKEâ€¦ 42471     12248825         oxaliplatin    
#&gt; 12 42471            MSKEâ€¦ 42471     12248825         oxaliplatin    
#&gt; 13 42471            MSKEâ€¦ 42471     12248879         fluorouracil   
#&gt; 14 42471            MSKEâ€¦ 42471     12248871         fluorouracil   
#&gt; 15 42471            MSKEâ€¦ 42471     12248881         fluorouracil   
#&gt; 16 42471            MSKEâ€¦ 42471     12248880         fluorouracil   
#&gt; 17 42471            MSKEâ€¦ 42471     12248881         fluorouracil   
#&gt; 18 42471            MSKEâ€¦ 42471     12248872         fluorouracil   
#&gt; 19 42471            MSKEâ€¦ 42471     12248827         oxaliplatin    
#&gt; 20 42471            MSKEâ€¦ 42471     12248874         fluorouracil   
#&gt; # â€¦ with 7 more variables: ingredient_start_date &lt;chr&gt;,
#&gt; #   ingredient_end_date &lt;chr&gt;, derived_regimen_name &lt;chr&gt;, regimen_id &lt;chr&gt;,
#&gt; #   regimen_name &lt;chr&gt;, derived_regimen_start_date &lt;chr&gt;,
#&gt; #   derived_regimen_end_date &lt;chr&gt;</code></pre>
</div>
</div>
<div id="oncoregimenfinder-results-summary" class="section level2">
<h2 class="hasAnchor">
<a href="#oncoregimenfinder-results-summary" class="anchor"></a>OncoRegimenFinder Results Summary</h2>
<div id="missingness" class="section level3">
<h3 class="hasAnchor">
<a href="#missingness" class="anchor"></a>Missingness</h3>
<p>Analysis of OncoRegimenFinder results shows that 1035 Person Ids out of the 1428 unique Person Ids in the Esophagus Cohort were resulted from OncoRegimenFinder.</p>
<p>Full Metrics:</p>
<pre><code>#&gt; # A tibble: 12 x 6
#&gt;    Variable               COUNT DISTINCT_COUNT NA_COUNT NA_STR_COUNT BLANK_COUNT
#&gt;    &lt;chr&gt;                  &lt;chr&gt; &lt;chr&gt;          &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt;      
#&gt;  1 esophagus_person_id    1006â€¦ 1428           0        0            0          
#&gt;  2 ptid                   1006â€¦ 1428           0        0            0          
#&gt;  3 person_id              1006â€¦ 1035           395      0            0          
#&gt;  4 drug_exposure_id       1006â€¦ 51884          395      0            0          
#&gt;  5 ingredient_name        1006â€¦ 87             395      0            0          
#&gt;  6 ingredient_start_date  1006â€¦ 2677           395      0            0          
#&gt;  7 ingredient_end_date    1006â€¦ 2963           395      0            0          
#&gt;  8 derived_regimen_name   1006â€¦ 425            395      0            0          
#&gt;  9 regimen_id             1006â€¦ 224            21271    0            0          
#&gt; 10 regimen_name           1006â€¦ 224            21271    0            0          
#&gt; 11 derived_regimen_startâ€¦ 1006â€¦ 2262           395      0            0          
#&gt; 12 derived_regimen_end_dâ€¦ 1006â€¦ 2483           395      0            0</code></pre>
</div>
</div>
<div id="redcap-data" class="section level2">
<h2 class="hasAnchor">
<a href="#redcap-data" class="anchor"></a>REDCap Data</h2>
<p>The REDCap Data is exported as a tabular file and the main patient identifier and all variables associated with oncology treatments are selected.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">identifier_vars</span> <span class="kw">&lt;-</span> <span class="st">"ptid"</span>
<span class="no">treatment_vars</span> <span class="kw">&lt;-</span>
          <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'neoadj_regimen'</span>,
          <span class="st">'neoadj_tx_additional_drugs'</span>,
          <span class="st">'neoadj_tx_addtl_drugs_2'</span>,
          <span class="st">'crt_name'</span>,
          <span class="st">'neoadjcrt_tx_additional_drugs'</span>,
          <span class="st">'neoadjcrt_tx_addtl_drugs_2'</span>,
          <span class="st">'adj_regimen'</span>,
          <span class="st">'adj_tx_additional_drugs'</span>,
          <span class="st">'adj_tx_addtl_drugs_2'</span>,
          <span class="st">'adj_rt_concurrent'</span>,
          <span class="st">'adjcrt_tx_additional_drugs'</span>,
          <span class="st">'adjcrt_tx_addtl_drugs_2'</span>,
          <span class="st">'induction_regimen'</span>,
          <span class="st">'periop_neo_regimen'</span>,
          <span class="st">'periop_adj_regimen'</span>,
          <span class="st">'tx_name'</span>,
          <span class="st">'advanced_tx_additional_drugs'</span>,
          <span class="st">'advanced_tx_addtl_drugs_2'</span>,
          <span class="st">'tx_maintenance_drugs'</span>,
          <span class="st">'advanced_tx_addtl_drugsm1_1'</span>,
          <span class="st">'advanced_tx_addtl_drugsm1_2'</span>,
          <span class="st">'tx_maintenance2_drugs'</span>,
          <span class="st">'advanced_tx_addtl_drugsm2_1'</span>,
          <span class="st">'advanced_tx_addtl_drugsm2_2'</span>,
          <span class="st">'palliative_rt_concurrent'</span>,
          <span class="st">'neoadj_tx_base_regimen'</span>,
          <span class="st">'neoadjcrt_tx_base_regimen'</span>,
          <span class="st">'adj_tx_base_regimen'</span>,
          <span class="st">'adjcrt_tx_base_regimen'</span>,
          <span class="st">'advanced_tx_base_regimen'</span>,
          <span class="st">'regimen_name_m1'</span>,
          <span class="st">'regimen_name_m2'</span>,
          <span class="st">'hipec_drugs'</span>)</pre></body></html></div>
<p>For each of the Variables, a copy of the REDCap Data is selected for the Patient Identifier (<code>ptid</code>) and the Variable, as well as any associated Start and Stop Dates and placed in a list object.</p>
<p>The output is a list of the length of the <code>treament_vars</code>, where each position of the list occupied by the Patient Identifier, the treatment_var, and all the possible date data associated with that treatment. Unlike other REDCap projects where there is a single set of start and end dates associated with the treatment, the Esophagus REDCap took it an extra step by including valuable clinical context information in their data collection. For example, the Variable <code>regimen_name_2</code> has the following possible dates: tx_start-tx_stop, tx_pre_maintenance_start-tx_pre_maintenance_stop, and tx_pre_maintenance2_start-tx_pre_maintenance2_stop.</p>
<pre><code>#&gt; # A tibble: 20 x 8
#&gt;    ptid  regimen_name_m2 tx_start tx_maintenance_â€¦ tx_maintenance2â€¦
#&gt;    &lt;chr&gt; &lt;chr&gt;           &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;           
#&gt;  1 MSKEâ€¦ FOLFOX + Trastâ€¦ 2016-12â€¦ 2017-02-08       2019-08-14      
#&gt;  2 MSKEâ€¦ Other           2017-02â€¦ 2017-06-08       2017-12-11      
#&gt;  3 MSKEâ€¦ Pembrolizumab   2017-03â€¦ 2017-10-03       2019-10-09      
#&gt;  4 MSKEâ€¦ CAPOX +Trastuzâ€¦ 2017-04â€¦ 2017-10-12       2018-05-10      
#&gt;  5 MSKEâ€¦ CAPOX +Trastuzâ€¦ 2017-05â€¦ 2017-10-25       2018-06-13      
#&gt;  6 MSKEâ€¦ CAPOX +Trastuzâ€¦ 2018-08â€¦ 2019-03-13       2019-05-22      
#&gt;  7 MSKEâ€¦ 5-FU+Trastuzumâ€¦ 2019-01â€¦ 2019-03-06       2019-08-07      
#&gt;  8 MSKEâ€¦ FOLFOX (5-FU +â€¦ 2016-08â€¦ 2016-12-05       2017-03-06      
#&gt;  9 MSKEâ€¦ FOLFIRI (5-FU â€¦ 2019-03â€¦ 2019-07-03       2019-08-21      
#&gt; 10 MSKEâ€¦ Capecitabine    2019-07â€¦ 2019-11-20       2020-02-05      
#&gt; 11 MSKEâ€¦ FOLFOX (5-FU +â€¦ 2017-10â€¦ 2018-05-23       2019-02-20      
#&gt; 12 MSKEâ€¦ Cisplatin       2014-01â€¦ 2015-07-15       2017-01-11      
#&gt; 13 MSKEâ€¦ FOLFOX (5-FU +â€¦ 2017-07â€¦ 2017-11-28       2019-05-01      
#&gt; 14 MSKEâ€¦ FOLFOX (5-FU +â€¦ 2014-11â€¦ 2015-05-11       2016-10-03      
#&gt; 15 MSKEâ€¦ 5-FU+Leucovorin 2015-01â€¦ 2015-03-04       2015-04-29      
#&gt; 16 MSKEâ€¦ 5-FU+Leucovorin 2015-04â€¦ 2015-10-13       2016-05-23      
#&gt; 17 MSKEâ€¦ 5-FU + Gemcitaâ€¦ &lt;NA&gt;     &lt;NA&gt;             &lt;NA&gt;            
#&gt; 18 MSKEâ€¦ FOLFOX (5-FU +â€¦ 2017-02â€¦ 2017-06-13       2017-09-26      
#&gt; 19 MSKEâ€¦ Other           2017-11â€¦ 2018-01-26       2018-08-31      
#&gt; 20 MSKEâ€¦ Capecitabine    2018-07â€¦ 2018-10-09       2020-03-20      
#&gt; # â€¦ with 3 more variables: tx_pre_maintenance_stop &lt;chr&gt;,
#&gt; #   tx_pre_maintenance2_stop &lt;chr&gt;, tx_stop &lt;chr&gt;</code></pre>
<p>For this particular project, 21 Variables have more than 1 set of start-stop dates for treatments due to contextual differences.</p>
<p>In order to manage the one-to-many relationship between a treatment and the contextual start and stop dates, the all the date Variables data are pivoted and the context is separated from the <code>DateType</code>, whether the <code>Date</code> represents a start or stop of a treatment.</p>
<pre><code>#&gt; # A tibble: 20 x 6
#&gt;    VARIABLE       ptid       PV     Context   DateType   Date      
#&gt;    &lt;chr&gt;          &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;     
#&gt;  1 neoadj_regimen MSKEGC0040 FOLFOX neoadj    start      2018-04-05
#&gt;  2 neoadj_regimen MSKEGC0040 FOLFOX crt       start_date &lt;NA&gt;      
#&gt;  3 neoadj_regimen MSKEGC0040 FOLFOX adj       start      &lt;NA&gt;      
#&gt;  4 neoadj_regimen MSKEGC0040 FOLFOX adj_rt    start      &lt;NA&gt;      
#&gt;  5 neoadj_regimen MSKEGC0040 FOLFOX induction start      &lt;NA&gt;      
#&gt;  6 neoadj_regimen MSKEGC0040 FOLFOX neoadj    stop       2018-06-07
#&gt;  7 neoadj_regimen MSKEGC0040 FOLFOX crt       stop_date  &lt;NA&gt;      
#&gt;  8 neoadj_regimen MSKEGC0040 FOLFOX adj       stop       &lt;NA&gt;      
#&gt;  9 neoadj_regimen MSKEGC0040 FOLFOX adj_rt    stop       &lt;NA&gt;      
#&gt; 10 neoadj_regimen MSKEGC0040 FOLFOX induction stop       &lt;NA&gt;      
#&gt; 11 neoadj_regimen MSKEGC0042 FLOT   neoadj    start      2017-11-30
#&gt; 12 neoadj_regimen MSKEGC0042 FLOT   crt       start_date &lt;NA&gt;      
#&gt; 13 neoadj_regimen MSKEGC0042 FLOT   adj       start      2018-04-25
#&gt; 14 neoadj_regimen MSKEGC0042 FLOT   adj_rt    start      &lt;NA&gt;      
#&gt; 15 neoadj_regimen MSKEGC0042 FLOT   induction start      &lt;NA&gt;      
#&gt; 16 neoadj_regimen MSKEGC0042 FLOT   neoadj    stop       2018-01-10
#&gt; 17 neoadj_regimen MSKEGC0042 FLOT   crt       stop_date  &lt;NA&gt;      
#&gt; 18 neoadj_regimen MSKEGC0042 FLOT   adj       stop       2018-05-09
#&gt; 19 neoadj_regimen MSKEGC0042 FLOT   adj_rt    stop       &lt;NA&gt;      
#&gt; 20 neoadj_regimen MSKEGC0042 FLOT   induction stop       &lt;NA&gt;</code></pre>
<p>Lastly, the data is massaged into the Patient Events Table Format, thereby successfully isolating the start-stop date concept pairs to a single observation level. At this stage any rows where both the Event Start and End Date are NA or blank are filtered out.</p>
<pre><code>#&gt; # A tibble: 20 x 6
#&gt;    VARIABLE       ptid       PV        Context   EVENT_START_DATE EVENT_END_DATE
#&gt;    &lt;chr&gt;          &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt;         
#&gt;  1 neoadj_regimen MSKEGC0040 FOLFOX    neoadj    2018-04-05       2018-06-07    
#&gt;  2 neoadj_regimen MSKEGC0040 FOLFOX    crt       NA               NA            
#&gt;  3 neoadj_regimen MSKEGC0040 FOLFOX    adj       NA               NA            
#&gt;  4 neoadj_regimen MSKEGC0040 FOLFOX    adj_rt    NA               NA            
#&gt;  5 neoadj_regimen MSKEGC0040 FOLFOX    induction NA               NA            
#&gt;  6 neoadj_regimen MSKEGC0042 FLOT      neoadj    2017-11-30       2018-01-10    
#&gt;  7 neoadj_regimen MSKEGC0042 FLOT      crt       NA               NA            
#&gt;  8 neoadj_regimen MSKEGC0042 FLOT      adj       2018-04-25       2018-05-09    
#&gt;  9 neoadj_regimen MSKEGC0042 FLOT      adj_rt    NA               NA            
#&gt; 10 neoadj_regimen MSKEGC0042 FLOT      induction NA               NA            
#&gt; 11 neoadj_regimen MSKEGC0056 EOX chemo neoadj    2017-03-01       NA            
#&gt; 12 neoadj_regimen MSKEGC0056 EOX chemo crt       NA               NA            
#&gt; 13 neoadj_regimen MSKEGC0056 EOX chemo adj       NA               NA            
#&gt; 14 neoadj_regimen MSKEGC0056 EOX chemo adj_rt    NA               NA            
#&gt; 15 neoadj_regimen MSKEGC0056 EOX chemo induction NA               NA            
#&gt; 16 neoadj_regimen MSKEGC0252 FOLFOX    neoadj    2017-08-02       2017-08-02    
#&gt; 17 neoadj_regimen MSKEGC0252 FOLFOX    crt       NA               NA            
#&gt; 18 neoadj_regimen MSKEGC0252 FOLFOX    adj       NA               NA            
#&gt; 19 neoadj_regimen MSKEGC0252 FOLFOX    adj_rt    NA               NA            
#&gt; 20 neoadj_regimen MSKEGC0252 FOLFOX    induction NA               NA</code></pre>
<p>The REDCap Data is then joined with the Esophagus Cohort Data on the <code>ptid</code> Variable to be able to map the data back to the OMOP Person Id. The Event Date columns are copied to additional <code>NORMALIZE</code> columns. These columns will also be added to the OncoRegimenFinder results in order to perform a union and to compare the accuracy between the 2 data sources.</p>
<pre><code>#&gt; Joining, by = "ptid"
#&gt; # A tibble: 20 x 9
#&gt;    VARIABLE ptid  PV    Context EVENT_START_DATE EVENT_END_DATE person_id
#&gt;    &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;            &lt;chr&gt;              &lt;dbl&gt;
#&gt;  1 neoadj_â€¦ MSKEâ€¦ FOLFâ€¦ neoadj  2018-04-05       2018-06-07        859261
#&gt;  2 neoadj_â€¦ MSKEâ€¦ FLOT  neoadj  2017-11-30       2018-01-10       1199120
#&gt;  3 neoadj_â€¦ MSKEâ€¦ FLOT  adj     2018-04-25       2018-05-09       1199120
#&gt;  4 neoadj_â€¦ MSKEâ€¦ EOX â€¦ neoadj  2017-03-01       &lt;NA&gt;             1421563
#&gt;  5 neoadj_â€¦ MSKEâ€¦ FOLFâ€¦ neoadj  2017-08-02       2017-08-02       1284231
#&gt;  6 neoadj_â€¦ MSKEâ€¦ FLOT  neoadj  2018-10-16       2018-11-27       1295920
#&gt;  7 neoadj_â€¦ MSKEâ€¦ Capeâ€¦ adj     2018-05-24       2018-07-11       1308346
#&gt;  8 neoadj_â€¦ MSKEâ€¦ Capeâ€¦ neoadj  2014-12-26       2015-01-16       1327098
#&gt;  9 neoadj_â€¦ MSKEâ€¦ Capeâ€¦ adj     2015-04-22       2015-06-01       1327098
#&gt; 10 neoadj_â€¦ MSKEâ€¦ mDCF  neoadj  2015-08-31       2016-01-14       1355614
#&gt; 11 neoadj_â€¦ MSKEâ€¦ Folfâ€¦ neoadj  2015-09-09       2015-11-25       1358071
#&gt; 12 neoadj_â€¦ MSKEâ€¦ FOLFâ€¦ neoadj  2015-11-12       2016-01-25       1365125
#&gt; 13 neoadj_â€¦ MSKEâ€¦ EOX   neoadj  2016-04-05       2016-06-07       1391799
#&gt; 14 neoadj_â€¦ MSKEâ€¦ EOX   adj     2016-10-04       2016-10-19       1391799
#&gt; 15 neoadj_â€¦ MSKEâ€¦ Doceâ€¦ neoadj  2016-11-02       2016-11-09       1400271
#&gt; 16 neoadj_â€¦ MSKEâ€¦ Doceâ€¦ neoadj  2016-11-02       2016-11-09       1400271
#&gt; 17 neoadj_â€¦ MSKEâ€¦ Doceâ€¦ adj_rt  2017-02-15       2017-03-22       1400271
#&gt; 18 neoadj_â€¦ MSKEâ€¦ Doceâ€¦ adj_rt  2017-02-15       2017-03-22       1400271
#&gt; 19 neoadj_â€¦ MSKEâ€¦ Doceâ€¦ inductâ€¦ 2016-09-12       2016-10-19       1400271
#&gt; 20 neoadj_â€¦ MSKEâ€¦ Doceâ€¦ inductâ€¦ 2016-09-12       2016-10-19       1400271
#&gt; # â€¦ with 2 more variables: NORMALIZE_START_DATE &lt;chr&gt;, NORMALIZE_END_DATE &lt;chr&gt;</code></pre>
<p>To prepare the REDCap Data for the join with the OncoRegimenFinder results for a side-by-side comparison, the last step is grouping the REDCap Data by Person Id.</p>
<p>The OncoRegimenFinder results is also be grouped based on Person Id, allowing for specific joins at the person level after copying the Date data into their corresponding <code>NORMALIZE</code> columns.</p>
<pre><code>#&gt; # A tibble: 100,647 x 14
#&gt;    esophagus_persoâ€¦ ptid  person_id drug_exposure_id ingredient_name
#&gt;    &lt;chr&gt;            &lt;chr&gt;     &lt;int&gt; &lt;chr&gt;            &lt;chr&gt;          
#&gt;  1 42471            MSKEâ€¦     42471 12248879         fluorouracil   
#&gt;  2 42471            MSKEâ€¦     42471 12248826         oxaliplatin    
#&gt;  3 42471            MSKEâ€¦     42471 12248871         fluorouracil   
#&gt;  4 42471            MSKEâ€¦     42471 12248872         fluorouracil   
#&gt;  5 42471            MSKEâ€¦     42471 12248824         oxaliplatin    
#&gt;  6 42471            MSKEâ€¦     42471 12248824         oxaliplatin    
#&gt;  7 42471            MSKEâ€¦     42471 12248873         fluorouracil   
#&gt;  8 42471            MSKEâ€¦     42471 12248873         fluorouracil   
#&gt;  9 42471            MSKEâ€¦     42471 12248880         fluorouracil   
#&gt; 10 42471            MSKEâ€¦     42471 12248826         oxaliplatin    
#&gt; # â€¦ with 100,637 more rows, and 9 more variables: ingredient_start_date &lt;chr&gt;,
#&gt; #   ingredient_end_date &lt;chr&gt;, derived_regimen_name &lt;chr&gt;, regimen_id &lt;chr&gt;,
#&gt; #   regimen_name &lt;chr&gt;, derived_regimen_start_date &lt;chr&gt;,
#&gt; #   derived_regimen_end_date &lt;chr&gt;, NORMALIZE_START_DATE &lt;chr&gt;,
#&gt; #   NORMALIZE_END_DATE &lt;chr&gt;</code></pre>
<p>The data from both sources are then blended, with a <code>DATA_SOURCE</code> column to demarcate whether the source was OMOP or REDCap.</p>
</div>
<div id="notably-incorrect" class="section level2">
<h2 class="hasAnchor">
<a href="#notably-incorrect" class="anchor"></a>Notably Incorrect</h2>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="no">final_output</span>$<span class="no">`1558617`</span>
<span class="co">#&gt; # A tibble: 42 x 20</span>
<span class="co">#&gt;    DATA_SOURCE VARIABLE ptid  PV    Context EVENT_START_DATE EVENT_END_DATE</span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;            &lt;chr&gt;         </span>
<span class="co">#&gt;  1 REDCAP      tx_name  MSKEâ€¦ FLOT  tx      2019-04-24       2020-01-30    </span>
<span class="co">#&gt;  2 REDCAP      tx_name  MSKEâ€¦ FLOT  tx_maiâ€¦ 2019-11-07       &lt;NA&gt;          </span>
<span class="co">#&gt;  3 REDCAP      tx_name  MSKEâ€¦ FLOT  tx_preâ€¦ &lt;NA&gt;             2019-06-10    </span>
<span class="co">#&gt;  4 REDCAP      tx_mainâ€¦ MSKEâ€¦ FOLFâ€¦ tx      2019-04-24       2020-01-30    </span>
<span class="co">#&gt;  5 REDCAP      tx_mainâ€¦ MSKEâ€¦ FOLFâ€¦ tx_maiâ€¦ 2019-11-07       &lt;NA&gt;          </span>
<span class="co">#&gt;  6 REDCAP      tx_mainâ€¦ MSKEâ€¦ FOLFâ€¦ tx_preâ€¦ &lt;NA&gt;             2019-06-10    </span>
<span class="co">#&gt;  7 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt;  8 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt;  9 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt; 10 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt; # â€¦ with 32 more rows, and 13 more variables: person_id &lt;dbl&gt;,</span>
<span class="co">#&gt; #   NORMALIZE_START_DATE &lt;chr&gt;, NORMALIZE_END_DATE &lt;chr&gt;,</span>
<span class="co">#&gt; #   esophagus_person_id &lt;chr&gt;, drug_exposure_id &lt;chr&gt;, ingredient_name &lt;chr&gt;,</span>
<span class="co">#&gt; #   ingredient_start_date &lt;chr&gt;, ingredient_end_date &lt;chr&gt;,</span>
<span class="co">#&gt; #   derived_regimen_name &lt;chr&gt;, regimen_id &lt;chr&gt;, regimen_name &lt;chr&gt;,</span>
<span class="co">#&gt; #   derived_regimen_start_date &lt;chr&gt;, derived_regimen_end_date &lt;chr&gt;</span></pre></body></html></div>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="no">final_output</span>$<span class="no">`1557156`</span>
<span class="co">#&gt; # A tibble: 35 x 20</span>
<span class="co">#&gt;    DATA_SOURCE VARIABLE ptid  PV    Context EVENT_START_DATE EVENT_END_DATE</span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;            &lt;chr&gt;         </span>
<span class="co">#&gt;  1 REDCAP      crt_name MSKEâ€¦ Durvâ€¦ crt     2019-10-16       2019-12-10    </span>
<span class="co">#&gt;  2 REDCAP      crt_name MSKEâ€¦ Durvâ€¦ inductâ€¦ 2019-09-18       2019-10-02    </span>
<span class="co">#&gt;  3 REDCAP      inductiâ€¦ MSKEâ€¦ Folfâ€¦ crt     2019-10-16       2019-12-10    </span>
<span class="co">#&gt;  4 REDCAP      inductiâ€¦ MSKEâ€¦ Folfâ€¦ inductâ€¦ 2019-09-18       2019-10-02    </span>
<span class="co">#&gt;  5 REDCAP      tx_name  MSKEâ€¦ Folfâ€¦ tx      2020-01-27       &lt;NA&gt;          </span>
<span class="co">#&gt;  6 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt;  7 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt;  8 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt;  9 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt; 10 OMOP        &lt;NA&gt;     MSKEâ€¦ &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;             &lt;NA&gt;          </span>
<span class="co">#&gt; # â€¦ with 25 more rows, and 13 more variables: person_id &lt;dbl&gt;,</span>
<span class="co">#&gt; #   NORMALIZE_START_DATE &lt;chr&gt;, NORMALIZE_END_DATE &lt;chr&gt;,</span>
<span class="co">#&gt; #   esophagus_person_id &lt;chr&gt;, drug_exposure_id &lt;chr&gt;, ingredient_name &lt;chr&gt;,</span>
<span class="co">#&gt; #   ingredient_start_date &lt;chr&gt;, ingredient_end_date &lt;chr&gt;,</span>
<span class="co">#&gt; #   derived_regimen_name &lt;chr&gt;, regimen_id &lt;chr&gt;, regimen_name &lt;chr&gt;,</span>
<span class="co">#&gt; #   derived_regimen_start_date &lt;chr&gt;, derived_regimen_end_date &lt;chr&gt;</span></pre></body></html></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Meera Patel, Michael Lam.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
